"use strict";(self["webpackChunkretail_creditbox_md"]=self["webpackChunkretail_creditbox_md"]||[]).push([[742],{4742:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var l=a(3673),n=a(2323);const i=(0,l.Uk)(" Retail CreditBox "),o=(0,l.Uk)("Ieșire"),u=(0,l.Uk)("   ");function r(e,t,a,r,s,d){const c=(0,l.up)("q-btn"),p=(0,l.up)("q-toolbar-title"),m=(0,l.up)("q-icon"),w=(0,l.up)("q-item-section"),h=(0,l.up)("q-item-label"),f=(0,l.up)("q-tooltip"),g=(0,l.up)("q-item"),k=(0,l.up)("q-toolbar"),_=(0,l.up)("q-header"),b=(0,l.up)("EssentialLink"),v=(0,l.up)("q-list"),q=(0,l.up)("q-drawer"),y=(0,l.up)("router-view"),W=(0,l.up)("q-page-container"),Z=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(Z,{view:"lHh Lpr lFf"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{elevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l._)("div",null,[(0,l.Wm)(g,{class:"text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"account_circle"})])),_:1}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.user.name),1)])),_:1}),(0,l.Wm)(h,{caption:"",class:"text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.getRole(e.user.role_id)),1)])),_:1})])),_:1}),(0,l.Wm)(w,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"logout",class:"cursor-pointer",color:"white",onClick:e.logout},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[o])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1})])),_:1}),e.authenticated&&e.hasPermissionToLeftMenu?((0,l.wg)(),(0,l.j4)(q,{key:0,modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[0]||(t[0]=t=>e.leftDrawerOpen=t),"show-if-above":"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"bg-indigo-1",style:{"border-bottom":"1px solid #dddddd",height:"51px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{avatar:""}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.linksList,(t=>((0,l.wg)(),(0,l.j4)(b,(0,l.dG)({key:t.title},t,{badge:"bids"===t.link&&e.newBids>0?e.newBids:0}),null,16,["badge"])))),128))])),_:1})])),_:1},8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y)])),_:1})])),_:1})}function s(e,t,a,i,o,u){const r=(0,l.up)("q-icon"),s=(0,l.up)("q-item-section"),d=(0,l.up)("q-item-label"),c=(0,l.up)("q-badge"),p=(0,l.up)("q-item"),m=(0,l.Q2)("ripple");return 0!==e.children.length||e.hidden?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.j4)(p,{key:0,dense:e.dense,clickable:!1,tag:"a",to:e.name?{name:e.name,exact:!0,params:e.params}:{path:e.link,exact:!0,params:e.params}},{default:(0,l.w5)((()=>[e.icon?((0,l.wg)(),(0,l.j4)(s,{key:0,avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{name:e.icon},null,8,["name"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.title),1)])),_:1}),e.caption?((0,l.wg)(),(0,l.j4)(d,{key:0,caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.caption),1)])),_:1})):(0,l.kq)("",!0),e.badge?((0,l.wg)(),(0,l.j4)(c,{key:1,floating:"",class:"q-mt-md q-mr-lg",color:"negative"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.badge),1)])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1},8,["dense","to"])),[[m]])}const d=(0,l.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},dense:{type:Boolean,required:!1},caption:{type:String,default:""},badge:{type:Number,default:0},link:{type:String,default:"#"},icon:{type:String,default:""},name:{type:String,default:""},params:{type:Object,default(){return{}}},hidden:{type:Boolean,default:!1},children:{type:Array,default(){return[]}}}});var c=a(4260),p=a(3414),m=a(2035),w=a(4554),h=a(2350),f=a(9721),g=a(6489),k=a(7518),_=a.n(k);const b=(0,c.Z)(d,[["render",s]]),v=b;_()(d,"components",{QItem:p.Z,QItemSection:m.Z,QIcon:w.Z,QItemLabel:h.Z,QBadge:f.Z}),_()(d,"directives",{Ripple:g.Z});var q=a(1959),y=a(3617),W=a(9582),Z=a(5474),Q=a(3413);const L=[{title:"Dealers",icon:"store",link:"dealers"},{title:"Calculator",icon:"functions",link:"calculator"},{title:"Cereri",icon:"warning_amber",link:"bids"},{title:"Contracte",icon:"gavel",link:"contracts"},{title:"Utilizatori",icon:"people_alt",link:"users"},{title:"Plăți",icon:"payments",link:"payments"},{title:"Rapoarte",icon:"bar_chart",link:"reports"},{title:"Settings",icon:"settings",link:"settings"}],z=(0,l.aZ)({name:"MainLayout",components:{EssentialLink:v},setup(){const e=(0,W.tv)(),t=(0,q.iH)(!1),a=(0,q.iH)(!1),n=(0,q.iH)(0),i=(0,y.oR)(),o=(0,l.Fl)((()=>!!i.getters["auth/getToken"])),u=(0,l.Fl)((()=>i.getters["auth/getUser"])),r=e=>(0,Q.O2)(e);(0,l.m0)((()=>{if(o.value)Z.api.defaults.headers.common.Authorization=`Bearer ${i.getters["auth/getToken"]}`;else{const t=Q.mb.get("token");t?(Z.api.defaults.headers.common.Authorization=`Bearer ${t}`,Z.api.post("/checkToken").then((a=>{a.data.success&&a.data.data&&a.data.data.user?(i.commit("auth/updateToken",t),i.commit("auth/updateUser",a.data.data.user)):(Z.api.defaults.headers.common.Authorization="",e.push({path:"/auth"}))})).catch((()=>{Z.api.defaults.headers.common.Authorization="",e.push({path:"/auth"})}))):(Z.api.defaults.headers.common.Authorization="",e.push({path:"/auth"}))}})),(0,l.m0)((()=>{a.value=!(!u.value||u.value.role_id===Q.Vz),u.value&&u.value.role_id===Q.Vz&&e.push({path:"/calculator"})}));const s=()=>{i.commit("auth/updateToken",""),i.commit("auth/updateUser",{}),Q.mb.set("token",""),Z.api.post("/logout")},d=()=>{u.value&&u.value.id&&Z.api.post("/checkNewMessages",{activeModule:i.getters["auth/getActiveModule"]}).then((e=>{if(e.data.success){const t=e.data.data;i.commit("auth/updateCheckNewMessages",t),t&&void 0!==t.newBids&&(n.value=t.newBids)}}))};return d(),setInterval((()=>{d()}),12e3),{authenticated:o,linksList:L,leftDrawerOpen:t,logout:s,hasPermissionToLeftMenu:a,toggleLeftDrawer(){t.value=!t.value},user:u,getRole:r,newBids:n}}});var U=a(9214),B=a(3812),C=a(9570),T=a(2165),I=a(3747),x=a(8870),j=a(2901),D=a(7011),M=a(2652);const S=(0,c.Z)(z,[["render",r]]),A=S;_()(z,"components",{QLayout:U.Z,QHeader:B.Z,QToolbar:C.Z,QBtn:T.Z,QToolbarTitle:I.Z,QItem:p.Z,QItemSection:m.Z,QIcon:w.Z,QItemLabel:h.Z,QTooltip:x.Z,QDrawer:j.Z,QList:D.Z,QPageContainer:M.Z})}}]);