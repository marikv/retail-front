"use strict";(self["webpackChunkretail_creditbox_md"]=self["webpackChunkretail_creditbox_md"]||[]).push([[64],{3413:(e,l,a)=>{a.d(l,{VB:()=>n,j3:()=>d,jh:()=>r,vy:()=>u,_f:()=>c,BC:()=>m,i:()=>p,Vz:()=>b,M6:()=>g,O2:()=>v,Zg:()=>_,sw:()=>f,ov:()=>h,bq:()=>x,XK:()=>w,F0:()=>y,Kk:()=>C,v2:()=>V,vc:()=>k,XZ:()=>S,$M:()=>H,Ah:()=>U,QP:()=>D,Zk:()=>I,NU:()=>W,LO:()=>F,Qm:()=>P,Zx:()=>B,C_:()=>T,WW:()=>Z,mb:()=>R});a(5363),a(71),a(7965),a(6016),a(2100);var t=a(6249),i=a(4434),o=a(5616),s=a(5474);const n=0,d=1,r=2,u=3,c=4,m=e=>{const l={};return l[n]="Cerere nouă",l[d]="Cerere în lucru",l[r]="Cerere aprobată",l[u]="Cerere refuzată",l[c]="Contract semnat",l[e]},p=1,b=2,g=3,v=e=>{const l={};return l[p]="Administrator",l[b]="Dealer",l[g]="Executor",l[e]},_=3,f=4,h=5,x=6,w=7,y=8,C=9,V=String(s.api.defaults.baseURL).replace("/api","/"),q=(e,l)=>o.ZP.extractDate(e,l),k=(e,l)=>o.ZP.formatDate(e,l),S=e=>k(q(e,"YYYY-MM-DD"),"DD.MM.YYYY"),H=e=>k(q(e,"YYYY-MM-DD HH:mm:ss"),"DD.MM.YYYY HH:mm:ss"),U={currentYear:(new Date).getFullYear(),days:["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"],daysShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],daysVeryShort:["D","L","M","M","J","V","S"],months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthsShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Noi","Dec"],firstDayOfWeek:1},D=(e="Așteptați")=>{t.Z.show({message:e})},I=()=>{t.Z.hide()},W=(e={},l)=>{0===Object.keys(e).length&&l&&l.response&&l.response.data&&(e.timeout=15e3,e.actions=[{icon:"close",color:"white"}],l.response.data.message&&l.response.data.message.indexOf("Unauthenticated")>-1?document.location.href="/#/auth":l.response.data.message&&l.response.data.message.indexOf("Duplicate entry ")>-1?e.message="Acest item deja există în baza de date":l.response.data.data&&l.response.data.data.message&&(e.message=`Eroare: ${l.response.data.data.message}`));const a={icon:void 0!==e.icon?e.icon:"warning",position:e.position||"top",timeout:e.timeout||1e4,progress:void 0===e.progress||e.progress,color:e.color||"red-14",html:e.html||!1,multiLine:e.multiLine||!1,textColor:e.textColor||"white",message:e.message||"Eroare de conexiune",actions:e.actions||[{icon:"close",color:"white"}]};i.Z.create(a)},F=e=>{let l=String(e).replace(".png","_mini.png").replace(".PNG","_mini.PNG").replace(".gif","_mini.gif").replace(".GIF","_mini.GIF").replace(".bmp","_mini.bmp").replace(".BMP","_mini.BMP").replace(".jpg","_mini.jpg").replace(".JPG","_mini.JPG").replace(".svg","_mini.svg").replace(".SVG","_mini.SVG").replace(".jpeg","_mini.jpeg").replace(".JPEG","_mini.JPEG");return l&&l.length&&l[0]&&"/"===l[0]&&(l=l.substring(1)),l},P=e=>{if(!e)return"-";e=e.split('"').join("").split("'").join("").split("&").join("").split("  ").join(" ");const l=e.substr(0,1);let a=e.length>1?e[1]:"",t=e.split(" ");return t[0].indexOf("-")>-1&&(t=t[0].split("-")),t.length>1&&(a=t[1].substr(0,1)),`${l}${a}`.toUpperCase()},B=e=>{if(!e)return"#000000";let l,a=0;for(l=0;l<e.length;l+=1)a=e.charCodeAt(l)+((a<<5)-a);let t="#";for(l=0;l<3;l+=1){const e=a>>8*l&255,i=`00${e.toString(16)}`;t+=i.substring(2)}return t},T=e=>{let l=e;return"users"===e?l="Utilizatori":"departments"===e?l="Departamente":"dealers"===e?l="Dileri":"cash"===e?l="Casa":"cashes"===e?l="Касса":"clients"===e?l="Beneficiari":"settings"===e&&(l="Settings"),l},Z=(e,l="/print/contract",a="contract")=>{if(e){const t=`${l}/${e}`;D(),(0,s.api)({url:t,method:"GET",responseType:"blob"}).then((l=>{I();const t=window.URL.createObjectURL(new Blob([l.data])),i=document.createElement("a");i.href=t,i.setAttribute("download",`${a}_${e}.pdf`),document.body.appendChild(i),i.click()})).catch((e=>{I(),W({},e)}))}else W({})},R={set:(e,l)=>{localStorage.setItem(e,JSON.stringify(l))},get:e=>{if(e in localStorage){const l=localStorage.getItem(e);return l?JSON.parse(l):l}return null}}},539:(e,l,a)=>{a.d(l,{Z:()=>La});var t=a(3673),i=a(8880),o=a(2323);const s={class:"full-width"},n=(0,t.Uk)("Caută"),d=(0,t._)("br",null,null,-1),r=(0,t._)("br",null,null,-1),u=(0,t.Uk)("Chat"),c=(0,t._)("br",null,null,-1),m=(0,t.Uk)("Șterge"),p=(0,t.Uk)("Deschide"),b=(0,t._)("br",null,null,-1),g=(0,t._)("br",null,null,-1),v=(0,t._)("br",null,null,-1),_={key:0,class:"text-red"},f=(0,t._)("strong",null," Suma Maxima Permisa: ",-1),h=(0,t._)("br",null,null,-1),x=(0,t._)("br",null,null,-1),w=(0,t._)("br",null,null,-1),y=(0,t._)("br",null,null,-1),C=(0,t._)("strong",null,"Suma:",-1),V=(0,t._)("br",null,null,-1);function q(e,l,a,q,k,S){const H=(0,t.up)("q-icon"),U=(0,t.up)("q-input"),D=(0,t.up)("q-tooltip"),I=(0,t.up)("q-btn"),W=(0,t.up)("q-badge"),F=(0,t.up)("q-td"),P=(0,t.up)("q-img"),B=(0,t.up)("q-avatar"),T=(0,t.up)("q-table"),Z=(0,t.up)("bid-dialog");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(T,{class:"full-width",flat:!0,title:"",rows:e.rows,columns:e.columns,"row-key":"id",filter:e.filter,pagination:e.pagination,"onUpdate:pagination":l[1]||(l[1]=l=>e.pagination=l),loading:e.loading,"binary-state-sort":"","no-data-label":"Nu sunt înregistrări","rows-per-page-label":"Înregistrări pe pagină","rows-per-page-options":[30,50,100,200,500,1e3,0],onRequest:e.onRequest,"card-class":"text-primary","table-class":"text-grey-8","table-header-class":"bg-indigo-1 text-primary",bordered:""},{"top-right":(0,t.w5)((()=>[(0,t.Wm)(U,{outlined:"","bg-color":"white",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.filter=l),onKeyup:(0,i.D2)(e.onRequest,["enter"]),placeholder:"Caută"},{append:(0,t.w5)((()=>[(0,t.Wm)(H,{name:"search"})])),_:1},8,["modelValue","onKeyup"]),(0,t.Wm)(I,{icon:"search",round:"",onClick:e.onRequest,class:"q-ml-lg",color:"primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[n])),_:1})])),_:1},8,["onClick"])])),"body-cell-id":(0,t.w5)((l=>[(0,t.Wm)(F,{props:l,class:"actions-td text-center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.id),1),d,(0,t.Wm)(I,{dense:"",round:"",flat:"",size:"md",color:"positive",onClick:a=>e.editRow(l.row.id,!1),icon:l.row.status_id===e.bidStatusSignedContract?"visibility":"edit"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.status_id===e.bidStatusSignedContract?"Deschide":"Redactează"),1)])),_:2},1024)])),_:2},1032,["onClick","icon"]),r,l.row.status_id!==e.bidStatusSignedContract?((0,t.wg)(),(0,t.j4)(I,{key:0,dense:"",round:"",flat:"",size:"md",color:e.unreadChats[l.row.id]?"negative":"positive",onClick:a=>e.editRow(l.row.id,!0),icon:e.unreadChats[l.row.id]?"chat_bubble":"chat_bubble_outline"},{default:(0,t.w5)((()=>[e.unreadChats[l.row.id]?((0,t.wg)(),(0,t.j4)(W,{key:0,color:"orange",floating:"",transparent:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.unreadChats[l.row.id]),1)])),_:2},1024)):(0,t.kq)("",!0),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[u])),_:1})])),_:2},1032,["color","onClick","icon"])):(0,t.kq)("",!0),c,e.isAdmin?((0,t.wg)(),(0,t.j4)(I,{key:1,dense:"",round:"",flat:"",size:"md",color:"negative",onClick:a=>e.deleteRow(l),icon:"delete"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[m])),_:1})])),_:2},1032,["onClick"])):(0,t.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-dealer_name":(0,t.w5)((l=>[(0,t.Wm)(F,{props:l,class:"props-td"},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{size:"md",onClick:a=>e.editRow(l.row.id),class:"cursor-pointer bg-white q-mr-sm",style:{border:"1px solid white"}},{default:(0,t.w5)((()=>[e.getLogo(l.row.logo)?((0,t.wg)(),(0,t.j4)(P,{key:0,src:e.getLogo(l.row.logo),alt:""},null,8,["src"])):((0,t.wg)(),(0,t.iD)("div",{key:1,style:(0,o.j5)(`color: ${e.getColorForLogo(l.row.dealer_name)}`)},(0,o.zw)(e.getInitialsForLogo(l.row.dealer_name)),5)),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[p])),_:1})])),_:2},1032,["onClick"]),(0,t._)("strong",null,(0,o.zw)(l.row.dealer_name),1),b,(0,t.Uk)(" User: "+(0,o.zw)(l.row.user_name),1),g,(0,t.Uk)(" "+(0,o.zw)(l.row.type_credits_name),1),v,(0,t.Uk)(" "+(0,o.zw)(l.row.created_at2)+" ",1),l.row.sum_max_permis?((0,t.wg)(),(0,t.iD)("div",_,[f,(0,t.Uk)(" "+(0,o.zw)(l.row.sum_max_permis),1)])):(0,t.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-phone1":(0,t.w5)((l=>[(0,t.Wm)(F,{props:l,class:"props-td"},{default:(0,t.w5)((()=>[(0,t._)("strong",null,(0,o.zw)(l.row.client_last_name)+" "+(0,o.zw)(l.row.client_first_name),1),h,(0,t.Uk)(" Tel: "+(0,o.zw)(l.row.phone1),1),x,(0,t.Uk)(" IDNP: "+(0,o.zw)(l.row.buletin_idnp),1),w,(0,t.Wm)(W,{color:e.getStatusBadgeColor(l.row.status_id),"text-color":e.getStatusBadgeTextColor(l.row.status_id)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.getBidStatus(l.row.status_id)),1)])),_:2},1032,["color","text-color"]),y,C,(0,t.Uk)(" "+(0,o.zw)(l.row.imprumut),1),V])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","pagination","loading","onRequest"]),(0,t.Wm)(Z,{ref:"BidDialogRef"},null,512)])}a(5363),a(71);var k=a(1959),S=a(3617),H=a(5474),U=a(3413),D=a(8825);const I={class:"text-subtitle1"},W=(0,t._)("span",{class:"text-blue-grey"},"Cerere",-1),F={class:(0,o.C_)("q-ml-md")},P={class:"row"},B=(0,t._)("div",{class:"col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-xs"},null,-1),T={class:"col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-xs text-center"},Z=(0,t._)("div",{class:"col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-xs"},null,-1),R={class:"col-xl-7 col-lg-7 col-md-6 col-sm-12 col-xs-12 q-pa-xs"},N={class:"text-primary text-h6"},O={class:"text-grey q-ml-lg"},L={class:"col-xl-5 col-lg-5 col-md-6 col-sm-12 col-xs-12 q-pa-xs text-right"},z={class:"text-red",style:{"font-size":"16px"}},M={style:{"font-size":"23px"}},E={style:{"font-weight":"bold"}},A=(0,t.Uk)(" Lei "),Q={class:"col-12 q-pl-sm"},j={class:"bg-green-1 q-pa-sm text-grey-7 full-height q-card--bordered rounded-borders text-caption"},$={key:0,class:"col-12",style:{"text-align":"center"}},Y=(0,t._)("span",null,"Graficul de rambursare",-1),G={key:1,class:"col-12"},K={style:{"max-width":"700px",width:"100%",margin:"auto"},class:"row"},J=(0,t._)("div",{class:"col-2 text-subtitle2"},"Data plății",-1),X=(0,t._)("div",{class:"col-2 text-subtitle2 text-right"},[(0,t.Uk)("Rambursări"),(0,t._)("br"),(0,t.Uk)("suma de bază")],-1),ee=(0,t._)("div",{class:"col-2 text-subtitle2 text-right"},"Dobânda",-1),le=(0,t._)("div",{class:"col-2 text-subtitle2 text-right"},[(0,t.Uk)("Comision de"),(0,t._)("br"),(0,t.Uk)("examinare")],-1),ae=(0,t._)("div",{class:"col-2 text-subtitle2 text-right"},[(0,t.Uk)("Comision de"),(0,t._)("br"),(0,t.Uk)("administrare")],-1),te=(0,t._)("div",{class:"col-2 text-subtitle2 text-right"},[(0,t.Uk)("Total de"),(0,t._)("br"),(0,t.Uk)("plată")],-1),ie={class:"col-2"},oe={class:"col-2 text-right"},se={class:"col-2 text-right"},ne={class:"col-2 text-right"},de={class:"col-2 text-right"},re={class:"col-2 text-right"},ue=(0,t._)("div",{class:"col-2 text-subtitle2"},"Total",-1),ce={class:"col-2 text-subtitle2 text-right"},me={class:"col-2 text-subtitle2 text-right"},pe={class:"col-2 text-subtitle2 text-right"},be={class:"col-2 text-subtitle2 text-right"},ge={class:"col-2 text-subtitle2 text-right"},ve={key:2,class:"col-12",style:{"text-align":"center"}},_e=(0,t._)("span",null,"Închide Graficul de rambursare",-1),fe={class:"col-12"},he={key:0},xe={class:"text-primary",style:{"font-size":"18px"}},we={class:"text-grey q-ml-lg"},ye={class:"col-12 q-mt-md"},Ce={class:"col-12 q-mt-md q-mb-md"},Ve={key:1,class:"col-12 text-red"},qe={key:2,class:"col-12 text-green-8 text-subtitle1"},ke=(0,t.Uk)(" Cerere aprobată "),Se={class:"text-green-10 text-subtitle2 q-ml-xl"},He=(0,t.Uk)(" Suma maximă permisă: "),Ue={key:3,class:"col-12 row"},De={class:"col-12"},Ie={class:"col-5"},We={class:"col-7 q-pt-md"},Fe={class:"col-5"},Pe={class:"col-7 q-pt-md"},Be={class:"col-5"},Te={class:"col-7 q-pt-md"},Ze={class:"col-5"},Re={class:"col-7 q-pt-md"},Ne={class:"col-5"},Oe={class:"col-7 q-pt-md"},Le={class:"col-5"},ze={class:"col-7 q-pt-md"},Me={key:4,class:"col-12 rounded-borders bg-green-2 row q-pa-md"},Ee={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-sm"},Ae={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-sm"},Qe=(0,t._)("div",{class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-sm"},null,-1),je={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-sm text-right"};function $e(e,l,a,i,s,n){const d=(0,t.up)("q-toolbar-title"),r=(0,t.up)("header-tabs-for-forms"),u=(0,t.up)("q-space"),c=(0,t.up)("q-btn"),m=(0,t.up)("q-toolbar"),p=(0,t.up)("q-separator"),b=(0,t.up)("q-icon"),g=(0,t.up)("q-badge"),v=(0,t.up)("q-img"),_=(0,t.up)("q-avatar"),f=(0,t.up)("bid-client-form"),h=(0,t.up)("bid-client-scoring"),x=(0,t.up)("file-upload"),w=(0,t.up)("q-input"),y=(0,t.up)("q-tab-panel"),C=(0,t.up)("payments"),V=(0,t.up)("chat"),q=(0,t.up)("files-form"),k=(0,t.up)("logs-table-for-forms"),S=(0,t.up)("q-tab-panels"),H=(0,t.up)("q-card-section"),U=(0,t.up)("q-card-actions"),D=(0,t.up)("q-card"),$e=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)($e,{ref:"dialogRef",modelValue:i.isOpenedLocal,"onUpdate:modelValue":l[10]||(l[10]=e=>i.isOpenedLocal=e),"full-height":"",persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{class:"q-dialog-plugin",style:{width:"100%","max-width":"1100px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:(0,o.C_)("q-pr-xs")},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t._)("span",I,[W,(0,t._)("strong",F,(0,o.zw)(i.id),1)])])),_:1}),(0,t.Wm)(r,{modelValue:i.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>i.tab=e),tabs:i.tabs},null,8,["modelValue","tabs"]),(0,t.Wm)(u),(0,t.Wm)(c,{icon:"close",flat:"",round:"",dense:"",onClick:i.onCancelClick},null,8,["onClick"])])),_:1}),(0,t.Wm)(p),(0,t.Wm)(H,{style:{"min-height":"calc(100vh - 165px)","max-height":"calc(100vh - 165px)"},class:"scroll"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{modelValue:i.tab,"onUpdate:modelValue":l[9]||(l[9]=e=>i.tab=e),animated:"","keep-alive":!1},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{name:"general",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t._)("div",P,[B,(0,t._)("div",T,[i.bidData&&i.bidData.user_id&&i.statusId===i.BID_STATUS_NEW&&(i.isExecutor||i.isAdmin)?((0,t.wg)(),(0,t.j4)(c,{key:0,size:"lg",color:"positive",onClick:l[1]||(l[1]=e=>i.setBidStatus(i.BID_STATUS_IN_WORK)),label:"Ia cererea în lucru"})):(0,t.kq)("",!0)]),Z,(0,t._)("div",R,[(0,t._)("span",N,(0,o.zw)(i.bidData&&i.bidData.type_credit?i.bidData.type_credit.name:""),1),(0,t._)("span",O,(0,o.zw)(i.dateToDot(i.bidData.created_at)),1)]),(0,t._)("div",L,[(0,t._)("span",z,[(0,t._)("span",M,[(0,t._)("span",E,(0,o.zw)(i.bidData&&i.bidData.imprumut?i.bidData.imprumut:"0"),1)]),A]),i.isDealer||i.bidData.status_id!==i.BID_STATUS_APPROVED&&i.bidData.status_id!==i.BID_STATUS_IN_WORK?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(c,{key:0,color:"primary",class:"q-ml-md",onClick:i.openPopupForSumChange,label:"Schimbă suma cererii"},null,8,["onClick"]))]),(0,t._)("div",Q,[(0,t._)("div",j,(0,o.zw)(i.bidData&&i.bidData.type_credit?i.bidData.type_credit.description_mini:""),1)]),i.bidData&&i.bidData.bid_months?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[i.showAllBidMonths?((0,t.wg)(),(0,t.iD)("div",G,[(0,t._)("div",K,[J,X,ee,le,ae,te,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.bidData.bid_months,((e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,{key:`res-${l}`},[(0,t._)("div",ie,(0,o.zw)(i.dateToDot(e.date)),1),(0,t._)("div",oe,(0,o.zw)(e.imprumut_per_luna),1),(0,t._)("div",se,(0,o.zw)(e.dobinda_per_luna),1),(0,t._)("div",ne,(0,o.zw)(e.comision_per_luna),1),(0,t._)("div",de,(0,o.zw)(e.comision_admin_per_luna),1),(0,t._)("div",re,(0,o.zw)(e.total_per_luna),1)],64)))),128)),ue,(0,t._)("div",ce,(0,o.zw)(i.bidData.imprumut),1),(0,t._)("div",me,(0,o.zw)(i.bidData.total_dobinda),1),(0,t._)("div",pe,(0,o.zw)(i.bidData.total_comision),1),(0,t._)("div",be,(0,o.zw)(i.bidData.total_comision_admin),1),(0,t._)("div",ge,(0,o.zw)(i.bidData.total),1)])])):((0,t.wg)(),(0,t.iD)("div",$,[i.showAllBidMonths?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(g,{key:0,color:"positive",style:{margin:"auto"},class:"cursor-pointer",onClick:l[2]||(l[2]=e=>i.showAllBidMonths=!0)},{default:(0,t.w5)((()=>[Y,(0,t.Wm)(b,{name:"expand_more"})])),_:1}))])),i.showAllBidMonths?((0,t.wg)(),(0,t.iD)("div",ve,[(0,t.Wm)(g,{color:"positive",style:{margin:"auto"},class:"cursor-pointer",onClick:l[3]||(l[3]=e=>i.showAllBidMonths=!1)},{default:(0,t.w5)((()=>[_e,(0,t.Wm)(b,{name:"expand_less"})])),_:1})])):(0,t.kq)("",!0)],64)):(0,t.kq)("",!0),(0,t._)("div",fe,[i.bidData.dealer?((0,t.wg)(),(0,t.iD)("div",he,[(0,t.Wm)(_,{size:"md",class:"cursor-pointer bg-white q-mr-sm",style:{border:"1px solid #cbcbcb"}},{default:(0,t.w5)((()=>[i.getLogo(i.bidData.dealer.logo)?((0,t.wg)(),(0,t.j4)(v,{key:0,src:i.getLogo(i.bidData.dealer.logo),alt:""},null,8,["src"])):((0,t.wg)(),(0,t.iD)("div",{key:1,style:(0,o.j5)(`color: ${i.getColorForLogo(i.bidData.dealer.name)}`)},(0,o.zw)(i.getInitialsForLogo(i.bidData.dealer.name)),5))])),_:1}),(0,t._)("span",xe,(0,o.zw)(i.bidData.dealer.name),1),(0,t._)("span",we,"User: "+(0,o.zw)(i.bidData.user.name),1)])):(0,t.kq)("",!0)]),(0,t._)("div",ye,[(0,t.Wm)(f)]),(0,t._)("div",Ce,[i.isDealer?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(h,{key:0}))]),i.bidData.status_id===i.BID_STATUS_REFUSED?((0,t.wg)(),(0,t.iD)("div",Ve," Cerere refuzată ")):(0,t.kq)("",!0),i.bidData.status_id===i.BID_STATUS_APPROVED?((0,t.wg)(),(0,t.iD)("div",qe,[ke,(0,t._)("span",Se,[He,(0,t._)("strong",null,(0,o.zw)(i.sumMaximPermis),1)])])):(0,t.kq)("",!0),i.bidData.status_id===i.BID_STATUS_APPROVED&&i.isDealer?((0,t.wg)(),(0,t.iD)("div",Ue,[(0,t._)("div",De,[(0,t.Wm)(c,{size:"md",onClick:l[4]||(l[4]=e=>i.printContract()),icon:"print",label:"Print Contract",class:"q-ma-md"}),(0,t.Wm)(c,{size:"md",onClick:l[5]||(l[5]=e=>i.printAnexa()),icon:"print",label:"Print Anexa",class:"q-ma-md"})]),(0,t._)("div",Ie,[(0,t.Wm)(x,{module:"bid_id",typeId:`${i.fileTypeSignContract}`,onOnUploaded:i.onFileUploaded,id:i.id},{button:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"md",icon:"attach_file",label:"Adaugă contractul semnat",class:"q-ma-md"})])),_:1},8,["typeId","onOnUploaded","id"])]),(0,t._)("div",We,(0,o.zw)(i.fileUploadedResponses[String(i.fileTypeSignContract)].name?i.fileUploadedResponses[String(i.fileTypeSignContract)].name:""),1),(0,t._)("div",Fe,[(0,t.Wm)(x,{module:"bid_id",typeId:`${i.fileTypeAnexa}`,onOnUploaded:i.onFileUploaded,id:i.id},{button:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"md",icon:"attach_file",label:"Adaugă anexa",class:"q-ma-md"})])),_:1},8,["typeId","onOnUploaded","id"])]),(0,t._)("div",Pe,(0,o.zw)(i.fileUploadedResponses[String(i.fileTypeAnexa)].name?i.fileUploadedResponses[String(i.fileTypeAnexa)].name:""),1),(0,t._)("div",Be,[(0,t.Wm)(x,{module:"bid_id",typeId:`${i.fileTypeBuletin1}`,onOnUploaded:i.onFileUploaded,id:i.id},{button:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"md",icon:"attach_file",label:"Adaugă copia actului de identitate 1",class:"q-ma-md"})])),_:1},8,["typeId","onOnUploaded","id"])]),(0,t._)("div",Te,(0,o.zw)(i.fileUploadedResponses[String(i.fileTypeBuletin1)].name?i.fileUploadedResponses[String(i.fileTypeBuletin1)].name:""),1),(0,t._)("div",Ze,[(0,t.Wm)(x,{module:"bid_id",typeId:`${i.fileTypeBuletin2}`,onOnUploaded:i.onFileUploaded,id:i.id},{button:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"md",icon:"attach_file",label:"Adaugă copia actului de identitate 2",class:"q-ma-md"})])),_:1},8,["typeId","onOnUploaded","id"])]),(0,t._)("div",Re,(0,o.zw)(i.fileUploadedResponses[String(i.fileTypeBuletin2)].name?i.fileUploadedResponses[String(i.fileTypeBuletin2)].name:""),1),(0,t._)("div",Ne,[(0,t.Wm)(x,{module:"bid_id",typeId:`${i.fileTypeOthers1}`,onOnUploaded:i.onFileUploaded,id:i.id},{button:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"md",icon:"attach_file",label:"Adaugă orice alt fișier 1",class:"q-ma-md"})])),_:1},8,["typeId","onOnUploaded","id"])]),(0,t._)("div",Oe,(0,o.zw)(i.fileUploadedResponses[String(i.fileTypeOthers1)].name?i.fileUploadedResponses[String(i.fileTypeOthers1)].name:""),1),(0,t._)("div",Le,[(0,t.Wm)(x,{module:"bid_id",typeId:`${i.fileTypeOthers2}`,onOnUploaded:i.onFileUploaded,id:i.id},{button:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"md",icon:"attach_file",label:"Adaugă orice alt fișier 2",class:"q-ma-md"})])),_:1},8,["typeId","onOnUploaded","id"])]),(0,t._)("div",ze,(0,o.zw)(i.fileUploadedResponses[String(i.fileTypeOthers2)].name?i.fileUploadedResponses[String(i.fileTypeOthers2)].name:""),1)])):(0,t.kq)("",!0),i.isDealer||i.bidData.status_id!==i.BID_STATUS_IN_WORK?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",Me,[(0,t._)("div",Ee,[(0,t.Wm)(w,{outlined:"",type:"number",class:"text-subtitle1 text-primary","input-class":"","bg-color":"white",modelValue:i.sumMaximPermis,"onUpdate:modelValue":l[6]||(l[6]=e=>i.sumMaximPermis=e),label:"Suma maximă permisă"},null,8,["modelValue"])]),(0,t._)("div",Ae,[(0,t.Wm)(c,{label:"Aprob",size:"lg",onClick:l[7]||(l[7]=e=>i.setBidStatus(i.BID_STATUS_APPROVED)),color:"positive"})]),Qe,(0,t._)("div",je,[(0,t.Wm)(c,{label:"Refuz",size:"lg",onClick:l[8]||(l[8]=e=>i.setBidStatus(i.BID_STATUS_REFUSED)),color:"negative"})])]))])])),_:1}),(0,t.Wm)(y,{name:"payments",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{bid_id:i.id},null,8,["bid_id"])])),_:1}),(0,t.Wm)(y,{name:"chat",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{bid_id:i.id},null,8,["bid_id"])])),_:1}),(0,t.Wm)(y,{name:"files",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{ref:"FilesForm",bid_id:i.id},null,8,["bid_id"])])),_:1}),(0,t.Wm)(y,{name:"user_tab_logs",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{entity_id:i.id,entity_name:"bids"},null,8,["entity_id"])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(p),(0,t.Wm)(U,{align:"right"},{default:(0,t.w5)((()=>[i.bidData.status_id===i.BID_STATUS_APPROVED&&i.isDealer?((0,t.wg)(),(0,t.j4)(c,{key:0,label:"Trimite contractul semnat / închide cererea",color:"primary",onClick:i.sendBidToContract},null,8,["onClick"])):(0,t.kq)("",!0),(0,t.Wm)(c,{label:"Închide",onClick:i.onCancelClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var Ye=a(3051),Ge=a(7755),Ke=a(3225),Je=a(9548),Xe=a(8886);const el={class:"row bg-blue-1 q-pa-sm rounded-borders"},ll=(0,t._)("div",{class:"col-12 text-primary"},[(0,t._)("h6",{class:"q-pa-xs q-ma-xs"},"Credit Scoring Calculation")],-1),al={class:"col-4 q-px-sm q-py-xs"},tl={class:"col-4 q-px-sm q-py-xs"},il={class:"col-4 q-px-sm q-py-xs"},ol={class:"col-4 q-px-sm q-py-xs"},sl={class:"col-4 q-px-sm q-py-xs"},nl={class:"col-4 q-px-sm q-py-xs"},dl={class:"col-4 q-px-sm q-py-xs"},rl={class:"col-4 q-px-sm q-py-xs"},ul={class:"col-4 q-px-sm q-py-xs"},cl={class:"col-4 q-px-sm q-py-xs"},ml={class:"col-4 q-px-sm q-py-xs"},pl={class:"col-4 q-px-sm q-py-xs"},bl={class:"col-4 q-px-sm q-py-xs"},gl={class:"col-4 q-px-sm q-py-xs"},vl={class:"col-4 q-px-sm q-py-xs"},_l={class:"col-4 q-px-sm q-py-xs"},fl={class:"col-4 q-px-sm q-py-xs"},hl={class:"col-12 q-pt-lg text-grey"};function xl(e,l,a,i,s,n){const d=(0,t.up)("q-select"),r=(0,t.up)("q-input");return(0,t.wg)(),(0,t.iD)("div",el,[ll,(0,t._)("div",al,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.studiiClass),modelValue:i.studii,"onUpdate:modelValue":[l[0]||(l[0]=e=>i.studii=e),i.updateValue],options:i.studiiOptions,label:"Nivelul studiilor","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",tl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.virstaClass),modelValue:i.virsta,"onUpdate:modelValue":[l[1]||(l[1]=e=>i.virsta=e),i.updateValue],options:i.virstaOptions,label:"Vârsta","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",il,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.stareaCivilaClass),modelValue:i.stareaCivila,"onUpdate:modelValue":[l[2]||(l[2]=e=>i.stareaCivila=e),i.updateValue],options:i.stareaCivilaOptions,label:"Starea civilă","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",ol,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.copiiClass),modelValue:i.copii,"onUpdate:modelValue":[l[3]||(l[3]=e=>i.copii=e),i.updateValue],options:i.copiiOptions,label:"Copii","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",sl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.locMuncaClass),modelValue:i.locMunca,"onUpdate:modelValue":[l[4]||(l[4]=e=>i.locMunca=e),i.updateValue],options:i.locMuncaOptions,label:"Locul de muncă","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",nl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.functieMuncaClass),modelValue:i.functieMunca,"onUpdate:modelValue":[l[5]||(l[5]=e=>i.functieMunca=e),i.updateValue],options:i.functieMuncaOptions,label:"Locul de muncă","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",dl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.durataMuncaClass),modelValue:i.durataMunca,"onUpdate:modelValue":[l[6]||(l[6]=e=>i.durataMunca=e),i.updateValue],options:i.durataMuncaOptions,label:"Durata contractului de muncă","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",rl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.bunuriImobileClass),modelValue:i.bunuriImobile,"onUpdate:modelValue":[l[7]||(l[7]=e=>i.bunuriImobile=e),i.updateValue],options:i.bunuriImobileOptions,label:"Bunuri imobile în proprietate","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",ul,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.bunuriMobileClass),modelValue:i.bunuriMobile,"onUpdate:modelValue":[l[8]||(l[8]=e=>i.bunuriMobile=e),i.updateValue],options:i.bunuriMobileOptions,label:"Bunuri mobile în proprietate","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",cl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.salariuClass),modelValue:i.salariu,"onUpdate:modelValue":[l[9]||(l[9]=e=>i.salariu=e),i.updateValue],options:i.salariuOptions,label:"Salariu","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",ml,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.alteVenituriClass),modelValue:i.alteVenituri,"onUpdate:modelValue":[l[10]||(l[10]=e=>i.alteVenituri=e),i.updateValue],options:i.alteVenituriOptions,label:"Alte venituri","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",pl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.alteVenituriFamilieClass),modelValue:i.alteVenituriFamilie,"onUpdate:modelValue":[l[11]||(l[11]=e=>i.alteVenituriFamilie=e),i.updateValue],options:i.alteVenituriFamilieOptions,label:"Venituri ale altor membri ai familiei","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",bl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.istorieCreditClass),modelValue:i.istorieCredit,"onUpdate:modelValue":[l[12]||(l[12]=e=>i.istorieCredit=e),i.updateValue],options:i.istorieCreditOptions,label:"Calitatea istoriei creditare","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",gl,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.datoriiClass),modelValue:i.datorii,"onUpdate:modelValue":[l[13]||(l[13]=e=>i.datorii=e),i.updateValue],options:i.datoriiOptions,label:"Datorii curente","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",vl,[i.datorii?((0,t.wg)(),(0,t.j4)(r,{key:0,outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.datoriiRataClass),modelValue:i.datoriiRata,"onUpdate:modelValue":l[14]||(l[14]=e=>i.datoriiRata=e),label:"Rata lunara a datoriilor curente",onKeyup:i.updateValue},null,8,["disable","class","modelValue","onKeyup"])):(0,t.kq)("",!0)]),(0,t._)("div",_l,[(0,t.Wm)(d,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.letigiiClass),modelValue:i.letigii,"onUpdate:modelValue":[l[15]||(l[15]=e=>i.letigii=e),i.updateValue],options:i.letigiiOptions,label:"Litigii curente","emit-value":"","map-options":""},null,8,["disable","class","modelValue","options","onUpdate:modelValue"])]),(0,t._)("div",fl,[(0,t.Wm)(r,{outlined:"",dense:"",disable:i.disableClientInputs,class:(0,o.C_)(i.infodebitScoringClass),modelValue:i.infodebitScoring,"onUpdate:modelValue":l[16]||(l[16]=e=>i.infodebitScoring=e),label:"Infodebit Scoring",onKeyup:i.updateValueInfodebitScoring},null,8,["disable","class","modelValue","onKeyup"])]),(0,t._)("div",{class:(0,o.C_)(`col-4 q-px-sm q-py-xs text-${i.infodebitScoringTextColor}`)},(0,o.zw)(i.infodebitScoringText),3),(0,t._)("div",hl," Baremul minim prestabilit pe Companie constituie "+(0,o.zw)(i.barem)+" puncte. ",1),(0,t._)("div",{class:(0,o.C_)("col-12 q-pt-lg text-subtitle1 "+(i.barem<i.total?"text-positive":"text-negative"))},[(0,t.Uk)(" Total puncte: "+(0,o.zw)(i.total)+" ",1),(0,t._)("strong",null,(0,o.zw)(i.ourScoringText),1),(0,t._)("div",null,"Suma permisă "+(0,o.zw)(i.ourScoringTextSumMaxim),1)],2)])}const wl={name:"BidClientScoring",props:{},setup(){const e=(0,S.oR)(),l=(0,k.iH)(0),a=(0,k.iH)(null),i=(0,k.iH)(!1),o=(0,k.iH)({}),s=(0,k.iH)(20.5),n=(0,k.iH)(0),d=(0,k.iH)("bg-white"),r=(0,k.iH)(0),u=(0,k.iH)("bg-white"),c=(0,k.iH)(0),m=(0,k.iH)("bg-white"),p=(0,k.iH)(0),b=(0,k.iH)("bg-white"),g=(0,k.iH)(0),v=(0,k.iH)("bg-white"),_=(0,k.iH)(0),f=(0,k.iH)("bg-white"),h=(0,k.iH)(0),x=(0,k.iH)("bg-white"),w=(0,k.iH)(0),y=(0,k.iH)("bg-white"),C=(0,k.iH)(0),V=(0,k.iH)("bg-white"),q=(0,k.iH)(0),D=(0,k.iH)("bg-white"),I=(0,k.iH)(0),W=(0,k.iH)("bg-white"),F=(0,k.iH)(0),P=(0,k.iH)("bg-white"),B=(0,k.iH)(0),T=(0,k.iH)("bg-white"),Z=(0,k.iH)(0),R=(0,k.iH)(""),N=(0,k.iH)("bg-white"),O=(0,k.iH)("bg-white"),L=(0,k.iH)(0),z=(0,k.iH)("bg-white"),M=(0,k.iH)("Risc sporit"),E=(0,k.iH)("negative"),A=(0,k.iH)(""),Q=(0,k.iH)(""),j=(0,k.iH)("negative"),$=(0,k.iH)(0),Y=(0,k.iH)("bg-white"),G=(0,k.iH)([{label:"Studii medii",value:0,fnc:"",bal:0},{label:"Studii gimnaziale",value:1,fnc:"",bal:.5},{label:"Studii Liceu",value:2,fnc:"",bal:1},{label:"Studii colegiu",value:3,fnc:"",bal:1.5},{label:"Superioare de licenta",value:4,fnc:"",bal:2.5},{label:"Superioare de master",value:5,fnc:"",bal:3},{label:"Doctorat",value:6,fnc:"",bal:4}]),K=(0,k.iH)([{label:"20 - 23 ani",value:0,fnc:"",bal:.2},{label:"24 - 27 ani",value:1,fnc:"",bal:1},{label:"28 - 32 ani",value:2,fnc:"",bal:2},{label:"33 - 35 ani",value:3,fnc:"",bal:2.5},{label:"37 - 50 ani",value:4,fnc:"",bal:4},{label:"51 -68 ani",value:5,fnc:"",bal:3}]),J=(0,k.iH)([{label:"celibatar",value:0,fnc:"",bal:1.5},{label:"Căsătorit",value:1,fnc:"",bal:3},{label:"divorțat",value:2,fnc:"",bal:1.5}]),X=(0,k.iH)([{label:"0",value:0,fnc:"",bal:0},{label:"1",value:1,fnc:"",bal:-.5},{label:"2",value:2,fnc:"",bal:-1},{label:"3",value:3,fnc:"",bal:-1.5},{label:"4",value:4,fnc:"",bal:-2},{label:"5",value:5,fnc:"",bal:-2.5},{label:"6",value:6,fnc:"",bal:-3},{label:"7",value:7,fnc:"",bal:-3.5},{label:"8",value:8,fnc:"",bal:-4},{label:"9",value:9,fnc:"",bal:-4.5},{label:"10",value:10,fnc:"",bal:-5},{label:"11",value:11,fnc:"",bal:-5.5},{label:"12",value:12,fnc:"",bal:-6},{label:"13",value:13,fnc:"",bal:-6.5},{label:"14",value:14,fnc:"",bal:-7},{label:"15 sau mai mult",value:15,fnc:"",bal:-100}]),ee=(0,k.iH)([{label:"-",value:0,fnc:"",bal:0},{label:"Gospodărie Țărănească",value:1,fnc:"",bal:1.2},{label:"Întreprinzător individual",value:2,fnc:"",bal:1.2},{label:"Societatea in nume colectiv",value:3,fnc:"",bal:1.7},{label:"Societatea in comandita",value:4,fnc:"",bal:1.5},{label:"Societatea cu răspundere limitata",value:5,fnc:"",bal:3},{label:"Societatea pe acțiuni",value:6,fnc:"",bal:2.5},{label:"Cooperativă de producție",value:7,fnc:"",bal:1.5},{label:"Cooperativa de întreprinzător",value:8,fnc:"",bal:2},{label:"Întreprindere de stat. Întreprindere municipală",value:9,fnc:"",bal:3}]),le=(0,k.iH)([{label:"Muncitor",value:0,fnc:"",bal:1.5},{label:"Personal operativ",value:1,fnc:"",bal:1.6},{label:"Personal cu functie de executie",value:2,fnc:"",bal:2},{label:"Personal cu functie de conducere",value:3,fnc:"",bal:3}]),ae=(0,k.iH)([{label:"0 - 6 luni",value:0,fnc:"",bal:0},{label:"0,6 - 1 ani",value:1,fnc:"",bal:1},{label:"1,1 - 2 ani",value:2,fnc:"",bal:1.8},{label:"2,1 - 3 ani",value:3,fnc:"",bal:2.2},{label:"3 - 5 ani",value:4,fnc:"",bal:2.5},{label:"mai mult de 5 ani",value:5,fnc:"",bal:3}]),te=(0,k.iH)([{label:"nu dispune",value:0,fnc:"",bal:0},{label:"chirie",value:1,fnc:"",bal:.7},{label:"cu parintii sau rudele",value:2,fnc:"",bal:1.2},{label:"apartament",value:3,fnc:"",bal:2},{label:"casa de locuit",value:4,fnc:"",bal:3},{label:"2 sau mai multe imobile",value:5,fnc:"",bal:3}]),ie=(0,k.iH)([{label:"nu dispune",value:0,fnc:"",bal:0},{label:"motocicleta",value:1,fnc:"",bal:.5},{label:"tractor",value:2,fnc:"",bal:1.5},{label:"autoturism",value:3,fnc:"",bal:3},{label:"Microbus",value:4,fnc:"",bal:2},{label:"Autobus",value:5,fnc:"",bal:1.5}]),oe=(0,k.iH)([{label:"0 - 1000",value:0,fnc:"",bal:0},{label:"1000 - 2000",value:1,fnc:"",bal:.5},{label:"2500 - 3500",value:2,fnc:"",bal:1},{label:"4000 - 5000",value:3,fnc:"",bal:1.5},{label:"5000 - 6500",value:4,fnc:"",bal:2},{label:"7000 - 8500",value:5,fnc:"",bal:3},{label:"9000 - 11000",value:6,fnc:"",bal:3},{label:"12000 si mai mult",value:7,fnc:"",bal:3}]),se=(0,k.iH)([{label:"0 - 1000",value:0,fnc:"",bal:0},{label:"1000 - 2000",value:1,fnc:"",bal:.5},{label:"2500 - 3500",value:2,fnc:"",bal:1},{label:"4000 - 5000",value:3,fnc:"",bal:1.5},{label:"5000 - 6500",value:4,fnc:"",bal:2},{label:"7000 - 8500",value:5,fnc:"",bal:3},{label:"9000 - 11000",value:6,fnc:"",bal:3},{label:"12000 si mai mult",value:7,fnc:"",bal:3}]),ne=(0,k.iH)([{label:"0 - 1000",value:0,fnc:"",bal:0},{label:"1000 - 2000",value:1,fnc:"",bal:.5},{label:"2500 - 3500",value:2,fnc:"",bal:1},{label:"4000 - 5000",value:3,fnc:"",bal:1.5},{label:"5000 - 6500",value:4,fnc:"",bal:2},{label:"7000 - 8500",value:5,fnc:"",bal:3},{label:"9000 - 11000",value:6,fnc:"",bal:3},{label:"12000 si mai mult",value:7,fnc:"",bal:3}]),de=(0,k.iH)([{label:"-",value:0,fnc:"",bal:0},{label:"rea",value:1,fnc:"",bal:-4},{label:"5000 - 10000",value:2,fnc:"",bal:1},{label:"10000 - 20000",value:3,fnc:"",bal:1.5},{label:"20000 - 35000",value:4,fnc:"",bal:2},{label:"35000 - 50000",value:5,fnc:"",bal:2.5},{label:"50000 - 70000",value:6,fnc:"",bal:3},{label:"70000 si mai mult",value:7,fnc:"",bal:4}]),re=(0,k.iH)([{label:"nu dispune",value:0,fnc:"",bal:3},{label:"5000 - 10000",value:1,fnc:"",bal:2.5},{label:"10000 - 20000",value:2,fnc:"",bal:2},{label:"20000 - 35000",value:3,fnc:"",bal:1.7},{label:"35000 - 50000",value:4,fnc:"",bal:1.4},{label:"50000 - 70000",value:5,fnc:"",bal:1},{label:"70000 si mai mult",value:6,fnc:"",bal:.5}]),ue=(0,k.iH)([{label:"fara antecedente penale",value:0,fnc:"",bal:3},{label:"proces administrativ",value:1,fnc:"",bal:1},{label:"in proces de judecata",value:2,fnc:"",bal:0},{label:"fost condamnat",value:3,fnc:"",bal:0}]),ce=(0,k.iH)([{label:"Risc sporit",value:0,minValue:0,maxValue:599,color:"negative",fnc:"",bal:0},{label:"Risc Mediu",value:1,minValue:600,maxValue:649,color:"orange",fnc:"",bal:0},{label:"Echitabil",value:2,minValue:650,maxValue:699,color:"lime-9",fnc:"",bal:0},{label:"Oportun",value:3,minValue:700,maxValue:749,color:"green",fnc:"",bal:0},{label:"Excelent",value:4,minValue:750,maxValue:999999999,color:"positive",fnc:"",bal:0}]),me=(0,k.iH)([{label:"Excelent",value:0,minValue:40.001,maxValue:999999,color:"positive",ourScoringTextSumMaxim:"500 până la 50.000",fnc:"",bal:0},{label:"Foarte bine",value:1,minValue:30.001,maxValue:40,color:"positive",ourScoringTextSumMaxim:"500 până la 25.000",fnc:"",bal:0},{label:"Bine",value:2,minValue:25,maxValue:30,color:"lime-9",ourScoringTextSumMaxim:"500 până la 15.000",fnc:"",bal:0},{label:"Satisfacator",value:3,minValue:20.6,maxValue:24.999,color:"orange",ourScoringTextSumMaxim:"500 până la 7.000",fnc:"",bal:0},{label:"Refuz",value:4,minValue:0,maxValue:20.5999,color:"negative",ourScoringTextSumMaxim:"0",fnc:"",bal:0}]),pe=(e,l,a)=>(l.value.forEach((l=>{l.value===a.value&&(e+=l.bal)})),e),be=(0,t.Fl)((()=>{let e=0;return e=pe(e,G,n),e=pe(e,K,r),e=pe(e,J,c),e=pe(e,X,p),e=pe(e,ee,g),e=pe(e,le,_),e=pe(e,ae,h),e=pe(e,te,w),e=pe(e,ie,C),e=pe(e,oe,q),e=pe(e,se,I),e=pe(e,ne,F),e=pe(e,de,B),e=pe(e,re,Z),e=pe(e,ue,$),R.value&&(e-=1*parseInt(String(parseFloat(R.value)/1e3),10)),parseFloat((Math.round(100*e)/100).toFixed(2))})),ge=()=>{l.value&&H.api.post(`/update-scoring/${l.value}`,{studii:n.value,virsta:r.value,stareaCivila:c.value,copii:p.value,locMunca:g.value,functieMunca:_.value,durataMunca:h.value,bunuriImobile:w.value,bunuriMobile:C.value,salariu:q.value,alteVenituri:I.value,alteVenituriFamilie:F.value,istorieCredit:B.value,datorii:Z.value,datoriiRata:R.value,infodebitScoring:L.value,letigii:$.value})},ve=()=>{L.value||(L.value=0),L.value=parseInt(String(L.value),10),ce.value.forEach((e=>{e.minValue<=L.value&&e.maxValue>=L.value&&(M.value=e.label,E.value=e.color)}))},_e=()=>{ve(),ge()};return(0,t.m0)((()=>{o.value=e.getters["bids/getOpenedBidData"]})),(0,t.m0)((()=>{be.value||(be.value=0),be.value=parseFloat(String(be.value)),me.value.forEach((e=>{e.minValue<=be.value&&e.maxValue>=be.value&&(A.value=e.label,j.value=e.color,Q.value=e.ourScoringTextSumMaxim)}))})),(0,t.m0)((()=>{o.value&&o.value.id&&(l.value=o.value.id?o.value.id:0,a.value=o.value.status_id?parseInt(o.value.status_id,10):0,a.value===U._f&&(i.value=!0))})),(0,t.m0)((()=>{if(o.value&&o.value.bid_scorings&&o.value.bid_scorings[0]&&o.value.bid_scorings[0].json_date&&o.value.bid_scorings[0].json_date.length){const e=JSON.parse(o.value.bid_scorings[0].json_date);e&&void 0!==e.studii&&(n.value=e.studii,r.value=e.virsta,c.value=e.stareaCivila,p.value=e.copii,g.value=e.locMunca,_.value=e.functieMunca,h.value=e.durataMunca,w.value=e.bunuriImobile,C.value=e.bunuriMobile,q.value=e.salariu,I.value=e.alteVenituri,F.value=e.alteVenituriFamilie,B.value=e.istorieCredit,Z.value=e.datorii,R.value=e.datoriiRata,L.value=e.infodebitScoring,$.value=e.letigii,setTimeout((()=>{ve()}),100))}})),{studiiOptions:G,studiiClass:d,studii:n,virstaOptions:K,virstaClass:u,virsta:r,stareaCivilaOptions:J,stareaCivilaClass:m,stareaCivila:c,copiiOptions:X,copiiClass:b,copii:p,locMuncaOptions:ee,locMuncaClass:v,locMunca:g,functieMuncaOptions:le,functieMuncaClass:f,functieMunca:_,durataMuncaOptions:ae,durataMuncaClass:x,durataMunca:h,bunuriImobileOptions:te,bunuriImobileClass:y,bunuriImobile:w,bunuriMobileOptions:ie,bunuriMobileClass:V,bunuriMobile:C,salariuOptions:oe,salariuClass:D,salariu:q,alteVenituriOptions:se,alteVenituriClass:W,alteVenituri:I,alteVenituriFamilieOptions:ne,alteVenituriFamilieClass:P,alteVenituriFamilie:F,istorieCreditOptions:de,istorieCreditClass:T,istorieCredit:B,datoriiOptions:re,datoriiClass:N,datorii:Z,datoriiRataClass:O,datoriiRata:R,ourScoringOptions:me,ourScoringText:A,ourScoringTextColor:j,ourScoringTextSumMaxim:Q,infodebitScoringText:M,infodebitScoringTextColor:E,updateValueInfodebitScoring:_e,infodebitScoringClass:z,infodebitScoring:L,letigiiOptions:ue,letigiiClass:Y,letigii:$,total:be,barem:s,updateValue:ge,disableClientInputs:i}}};var yl=a(4260),Cl=a(8516),Vl=a(4842),ql=a(7518),kl=a.n(ql);const Sl=(0,yl.Z)(wl,[["render",xl]]),Hl=Sl;kl()(wl,"components",{QSelect:Cl.Z,QInput:Vl.Z});const Ul={class:"col-12 row q-mt-lg q-pa-sm bg-teal-1 rounded-borders"},Dl=(0,t._)("div",{class:"col-12 text-primary"},[(0,t._)("h6",{class:"q-pa-xs q-ma-xs"},"Date client")],-1),Il={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Wl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Fl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Pl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Bl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Tl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Zl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Rl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Nl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Ol=(0,t._)("div",{class:"col-12 text-primary"},"Adresa de reședință (buletin)",-1),Ll={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},zl={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Ml={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},El={class:"col-xl-2 col-lg-2 col-md-2 col-sm-6 col-xs-12 q-pa-xs"},Al={class:"col-xl-1 col-lg-1 col-md-1 col-sm-6 col-xs-12 q-pa-xs"},Ql={class:"col-12 text-primary"},jl=(0,t.Uk)("Adresa domiciliu "),$l={key:0,class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Yl={key:1,class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Gl={key:2,class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},Kl={key:3,class:"col-xl-2 col-lg-2 col-md-2 col-sm-6 col-xs-12 q-pa-xs"},Jl={key:4,class:"col-xl-1 col-lg-1 col-md-1 col-sm-6 col-xs-12 q-pa-xs"},Xl=(0,t._)("div",{class:"col-12 text-primary"},"Persoana de contact 1",-1),ea={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},la={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},aa={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},ta={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},ia=(0,t._)("div",{class:"col-12 text-primary"},"Persoana de contact 2",-1),oa={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},sa={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},na={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},da={class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-xs"},ra=(0,t._)("div",{class:"col-12 text-primary"},"Produsul sau serviciul comercializat",-1),ua={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 q-pa-xs"},ca={class:"col-12 text-right q-my-sm"};function ma(e,l,a,i,o,s){const n=(0,t.up)("q-input"),d=(0,t.up)("q-checkbox"),r=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",Ul,[Dl,(0,t._)("div",Il,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientBuletinSNHasError,onBlur:l[0]||(l[0]=e=>i.clientBuletinSNHasError=!1),onFocus:l[1]||(l[1]=e=>i.clientBuletinSNHasError=!1),type:"text",rules:[e=>9===e.length||"9 caractere"],label:"Buletin S/N",modelValue:i.clientBuletinSN,"onUpdate:modelValue":l[2]||(l[2]=e=>i.clientBuletinSN=e)},null,8,["disable","error","rules","modelValue"])]),(0,t._)("div",Wl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientBuletinIDNPHasError,onBlur:l[3]||(l[3]=e=>i.clientBuletinIDNPHasError=!1),onFocus:l[4]||(l[4]=e=>i.clientBuletinIDNPHasError=!1),type:"text",rules:[e=>13===e.length||"13 cifre"],label:"Buletin IDNP",modelValue:i.clientBuletinIDNP,"onUpdate:modelValue":l[5]||(l[5]=e=>i.clientBuletinIDNP=e)},null,8,["disable","error","rules","modelValue"])]),(0,t._)("div",Fl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientBuletinOfficeHasError,onBlur:l[6]||(l[6]=e=>i.clientBuletinOfficeHasError=!1),onFocus:l[7]||(l[7]=e=>i.clientBuletinOfficeHasError=!1),type:"text",label:"Buletin Eliberat de",modelValue:i.clientBuletinOffice,"onUpdate:modelValue":l[8]||(l[8]=e=>i.clientBuletinOffice=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Pl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientBuletinDateTillHasError,onBlur:l[9]||(l[9]=e=>i.clientBuletinDateTillHasError=!1),onFocus:l[10]||(l[10]=e=>i.clientBuletinDateTillHasError=!1),type:"text",mask:"##.##.####",label:"Data eliberării",modelValue:i.clientBuletinDateTill,"onUpdate:modelValue":l[11]||(l[11]=e=>i.clientBuletinDateTill=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Bl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientFirstNameHasError,onBlur:l[12]||(l[12]=e=>i.clientFirstNameHasError=!1),onFocus:l[13]||(l[13]=e=>i.clientFirstNameHasError=!1),type:"text",label:"Nume",modelValue:i.clientFirstName,"onUpdate:modelValue":l[14]||(l[14]=e=>i.clientFirstName=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Tl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientLastNameHasError,onBlur:l[15]||(l[15]=e=>i.clientLastNameHasError=!1),onFocus:l[16]||(l[16]=e=>i.clientLastNameHasError=!1),type:"text",label:"Prenume",modelValue:i.clientLastName,"onUpdate:modelValue":l[17]||(l[17]=e=>i.clientLastName=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Zl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientPhoneHasError,onBlur:l[18]||(l[18]=e=>i.clientPhoneHasError=!1),onFocus:l[19]||(l[19]=e=>i.clientPhoneHasError=!1),type:"text",label:"Telefon",modelValue:i.clientPhone,"onUpdate:modelValue":l[20]||(l[20]=e=>i.clientPhone=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Rl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientEmailHasError,onBlur:l[21]||(l[21]=e=>i.clientEmailHasError=!1),onFocus:l[22]||(l[22]=e=>i.clientEmailHasError=!1),type:"email",label:"Email",modelValue:i.clientEmail,"onUpdate:modelValue":l[23]||(l[23]=e=>i.clientEmail=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Nl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientBirthDateHasError,onBlur:l[24]||(l[24]=e=>i.clientBirthDateHasError=!1),onFocus:l[25]||(l[25]=e=>i.clientBirthDateHasError=!1),type:"text",mask:"##.##.####",label:"Data de naștere",modelValue:i.clientBirthDate,"onUpdate:modelValue":l[26]||(l[26]=e=>i.clientBirthDate=e)},null,8,["disable","error","modelValue"])]),Ol,(0,t._)("div",Ll,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientRegionRegHasError,onBlur:l[27]||(l[27]=e=>i.clientRegionRegHasError=!1),onFocus:l[28]||(l[28]=e=>i.clientRegionRegHasError=!1),type:"text",label:"Raion",modelValue:i.clientRegionReg,"onUpdate:modelValue":l[29]||(l[29]=e=>i.clientRegionReg=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",zl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientLocalitateRegHasError,onBlur:l[30]||(l[30]=e=>i.clientLocalitateRegHasError=!1),onFocus:l[31]||(l[31]=e=>i.clientLocalitateRegHasError=!1),type:"text",label:"Localitate",modelValue:i.clientLocalitateReg,"onUpdate:modelValue":l[32]||(l[32]=e=>i.clientLocalitateReg=e)},null,8,["disable","error","modelValue"])]),(0,t._)("div",Ml,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Strada",modelValue:i.clientStreetReg,"onUpdate:modelValue":l[33]||(l[33]=e=>i.clientStreetReg=e)},null,8,["disable","modelValue"])]),(0,t._)("div",El,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Bloc",modelValue:i.clientHouseReg,"onUpdate:modelValue":l[34]||(l[34]=e=>i.clientHouseReg=e)},null,8,["disable","modelValue"])]),(0,t._)("div",Al,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Apartament",modelValue:i.clientFlatReg,"onUpdate:modelValue":l[35]||(l[35]=e=>i.clientFlatReg=e)},null,8,["disable","modelValue"])]),(0,t._)("div",Ql,[jl,(0,t.Wm)(d,{modelValue:i.clientSameAddresses,"onUpdate:modelValue":l[36]||(l[36]=e=>i.clientSameAddresses=e),label:"Adresa domiciliului coincide cu cea de reședință"},null,8,["modelValue"])]),i.clientSameAddresses?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",$l,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientRegionHasError,onBlur:l[37]||(l[37]=e=>i.clientRegionHasError=!1),onFocus:l[38]||(l[38]=e=>i.clientRegionHasError=!1),type:"text",label:"Raion",modelValue:i.clientRegion,"onUpdate:modelValue":l[39]||(l[39]=e=>i.clientRegion=e)},null,8,["disable","error","modelValue"])])),i.clientSameAddresses?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",Yl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",error:i.clientLocalitateHasError,onBlur:l[40]||(l[40]=e=>i.clientLocalitateHasError=!1),onFocus:l[41]||(l[41]=e=>i.clientLocalitateHasError=!1),type:"text",label:"Localitate",modelValue:i.clientLocalitate,"onUpdate:modelValue":l[42]||(l[42]=e=>i.clientLocalitate=e)},null,8,["disable","error","modelValue"])])),i.clientSameAddresses?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",Gl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Strada",modelValue:i.clientStreet,"onUpdate:modelValue":l[43]||(l[43]=e=>i.clientStreet=e)},null,8,["disable","modelValue"])])),i.clientSameAddresses?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",Kl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Bloc",modelValue:i.clientHouse,"onUpdate:modelValue":l[44]||(l[44]=e=>i.clientHouse=e)},null,8,["disable","modelValue"])])),i.clientSameAddresses?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",Jl,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Apartament",modelValue:i.clientFlat,"onUpdate:modelValue":l[45]||(l[45]=e=>i.clientFlat=e)},null,8,["disable","modelValue"])])),Xl,(0,t._)("div",ea,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Nume",modelValue:i.clientFirstNameContPers1,"onUpdate:modelValue":l[46]||(l[46]=e=>i.clientFirstNameContPers1=e)},null,8,["disable","modelValue"])]),(0,t._)("div",la,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Prenume",modelValue:i.clientLastNameContPers1,"onUpdate:modelValue":l[47]||(l[47]=e=>i.clientLastNameContPers1=e)},null,8,["disable","modelValue"])]),(0,t._)("div",aa,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Telefon",modelValue:i.clientPhoneContPers1,"onUpdate:modelValue":l[48]||(l[48]=e=>i.clientPhoneContPers1=e)},null,8,["disable","modelValue"])]),(0,t._)("div",ta,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Cine este",modelValue:i.clientWhoIsContPers1,"onUpdate:modelValue":l[49]||(l[49]=e=>i.clientWhoIsContPers1=e)},null,8,["disable","modelValue"])]),ia,(0,t._)("div",oa,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Nume",modelValue:i.clientFirstNameContPers2,"onUpdate:modelValue":l[50]||(l[50]=e=>i.clientFirstNameContPers2=e)},null,8,["disable","modelValue"])]),(0,t._)("div",sa,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Prenume",modelValue:i.clientLastNameContPers2,"onUpdate:modelValue":l[51]||(l[51]=e=>i.clientLastNameContPers2=e)},null,8,["disable","modelValue"])]),(0,t._)("div",na,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Telefon",modelValue:i.clientPhoneContPers2,"onUpdate:modelValue":l[52]||(l[52]=e=>i.clientPhoneContPers2=e)},null,8,["disable","modelValue"])]),(0,t._)("div",da,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"Cine este",modelValue:i.clientWhoIsContPers2,"onUpdate:modelValue":l[53]||(l[53]=e=>i.clientWhoIsContPers2=e)},null,8,["disable","modelValue"])]),ra,(0,t._)("div",ua,[(0,t.Wm)(n,{dense:"",outlined:"",disable:i.disableClientInputs,class:"client-input","bg-color":"white",type:"text",label:"",modelValue:i.clientProdus,"onUpdate:modelValue":l[54]||(l[54]=e=>i.clientProdus=e)},null,8,["disable","modelValue"])]),(0,t._)("div",ca,[i.disableClientInputs?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:0,color:"teal-7",icon:"save",label:"Salvează datele clientului",onClick:i.saveClientData},null,8,["onClick"]))])])}a(6245);const pa={name:"BidClientForm",props:{},setup(){const e=(0,D.Z)(),l=(0,S.oR)(),a=(0,k.iH)(0),i=(0,k.iH)(null),o=(0,k.iH)({}),s=(0,k.iH)(""),n=(0,k.iH)(!1),d=(0,k.iH)(""),r=(0,k.iH)(!1),u=(0,k.iH)(""),c=(0,k.iH)(!1),m=(0,k.iH)(""),p=(0,k.iH)(!1),b=(0,k.iH)(""),g=(0,k.iH)(!1),v=(0,k.iH)(""),_=(0,k.iH)(!1),f=(0,k.iH)(""),h=(0,k.iH)(!1),x=(0,k.iH)(""),w=(0,k.iH)(!1),y=(0,k.iH)(""),C=(0,k.iH)(!1),V=(0,k.iH)(""),q=(0,k.iH)(!1),I=(0,k.iH)(""),W=(0,k.iH)(!1),F=(0,k.iH)(""),P=(0,k.iH)(""),B=(0,k.iH)(""),T=(0,k.iH)(""),Z=(0,k.iH)(!1),R=(0,k.iH)(""),N=(0,k.iH)(!1),O=(0,k.iH)(""),L=(0,k.iH)(""),z=(0,k.iH)(""),M=(0,k.iH)(!0),E=(0,k.iH)(""),A=(0,k.iH)(""),Q=(0,k.iH)(""),j=(0,k.iH)(""),$=(0,k.iH)(""),Y=(0,k.iH)(""),G=(0,k.iH)(""),K=(0,k.iH)(""),J=(0,k.iH)(""),X=(0,k.iH)(!1),ee=()=>{e.dialog({title:"Atenție",message:"Sunteți sigur că doriți să salvați datele clientului?",cancel:"Închide",ok:{flat:!1,label:"Da, sunt sigur"},persistent:!0}).onOk((()=>{a.value?((0,U.QP)(),H.api.post(`/bid-save-client-data/${a.value}`,{first_name:s.value,last_name:d.value,phone1:u.value,email:m.value,buletin_sn:b.value,buletin_idnp:v.value,buletin_office:f.value,buletin_date_till:x.value,birth_date:y.value,region:V.value,localitate:I.value,street:F.value,house:P.value,flat:B.value,region_reg:T.value,localitate_reg:R.value,street_reg:O.value,house_reg:L.value,flat_reg:z.value,same_addresses:M.value,who_is_cont_pers1:E.value,phone_cont_pers1:A.value,last_name_cont_pers1:Q.value,first_name_cont_pers1:j.value,who_is_cont_pers2:Y.value,produs:$.value,phone_cont_pers2:G.value,last_name_cont_pers2:K.value,first_name_cont_pers2:J.value}).then((e=>{(0,U.Zk)(),e.data.success?l.commit("bids/updateOpenedBidData",e.data.data):(0,U.NU)({message:e.data.data.message})})).catch((e=>{(0,U.Zk)(),(0,U.NU)({},e)}))):(0,U.NU)({message:"eroare de id cerere"})}))};return(0,t.m0)((()=>{o.value=l.getters["bids/getOpenedBidData"]})),(0,t.m0)((()=>{o.value&&o.value.id&&(a.value=o.value.id?o.value.id:0,i.value=o.value.status_id?parseInt(o.value.status_id,10):0,i.value===U._f&&(X.value=!0),s.value=o.value.first_name,d.value=o.value.last_name,u.value=o.value.phone1,m.value=o.value.email,b.value=o.value.buletin_sn,v.value=o.value.buletin_idnp,f.value=o.value.buletin_office,x.value=(0,U.XZ)(o.value.buletin_date_till),y.value=(0,U.XZ)(o.value.birth_date),V.value=o.value.region,I.value=o.value.localitate,F.value=o.value.street,P.value=o.value.house,B.value=o.value.flat,T.value=o.value.region_reg,R.value=o.value.localitate_reg,O.value=o.value.street_reg,L.value=o.value.house_reg,z.value=o.value.flat_reg,M.value=1===parseInt(String(o.value.same_addresses),10),E.value=o.value.who_is_cont_pers1,A.value=o.value.phone_cont_pers1,Q.value=o.value.last_name_cont_pers1,j.value=o.value.first_name_cont_pers1,$.value=o.value.produs,Y.value=o.value.who_is_cont_pers2,G.value=o.value.phone_cont_pers2,K.value=o.value.last_name_cont_pers2,J.value=o.value.first_name_cont_pers2)})),{clientFirstName:s,clientFirstNameHasError:n,clientLastName:d,clientLastNameHasError:r,clientEmail:m,clientEmailHasError:p,clientPhone:u,clientPhoneHasError:c,clientBuletinSN:b,clientBuletinSNHasError:g,clientBuletinIDNP:v,clientBuletinIDNPHasError:_,clientBuletinOffice:f,clientBuletinOfficeHasError:h,clientBuletinDateTill:x,clientBuletinDateTillHasError:w,clientBirthDate:y,clientBirthDateHasError:C,clientRegion:V,clientRegionHasError:q,clientLocalitate:I,clientLocalitateHasError:W,clientStreet:F,clientHouse:P,clientFlat:B,clientRegionReg:T,clientRegionRegHasError:Z,clientLocalitateReg:R,clientLocalitateRegHasError:N,clientStreetReg:O,clientHouseReg:L,clientFlatReg:z,clientSameAddresses:M,clientWhoIsContPers1:E,clientPhoneContPers1:A,clientLastNameContPers1:Q,clientFirstNameContPers1:j,clientProdus:$,clientWhoIsContPers2:Y,clientPhoneContPers2:G,clientLastNameContPers2:K,clientFirstNameContPers2:J,disableClientInputs:X,saveClientData:ee}}};var ba=a(5735),ga=a(2165);const va=(0,yl.Z)(pa,[["render",ma]]),_a=va;kl()(pa,"components",{QInput:Vl.Z,QCheckbox:ba.Z,QBtn:ga.Z});var fa=a(9361);const ha={name:"BidDialog",components:{Payments:fa["default"],BidClientForm:_a,BidClientScoring:Hl,FileUpload:Xe.Z,FilesForm:Je.Z,LogsTableForForms:Ke.Z,HeaderTabsForForms:Ge.Z,Chat:Ye.Z},setup(){const e=(0,S.oR)(),l=(0,D.Z)(),a=(0,k.iH)(!1),i=(0,k.iH)(0),o=(0,k.iH)(null),s=(0,k.iH)({}),n=(0,k.iH)(!1),d=(0,k.iH)(!1),r=(0,k.iH)(!1),u=(0,k.iH)(!1),c=(0,k.iH)(0),m=(0,k.iH)(0),p=(0,k.iH)(0),b=(0,k.iH)(!0),g=(0,k.iH)(U.sw),v=(0,k.iH)(U.Kk),_=(0,k.iH)(U.Zg),f=(0,k.iH)(U.ov),h=(0,k.iH)(U.bq),x=(0,k.iH)(U.XK),w=(0,k.iH)(U.F0),y={};y[String(U.sw)]={},y[String(U.Kk)]={},y[String(U.Zg)]={},y[String(U.ov)]={},y[String(U.bq)]={},y[String(U.XK)]={},y[String(U.F0)]={};const C=(0,k.iH)({...y}),V=(0,t.Fl)((()=>e.getters["auth/getUser"])),q=e=>{if(e){const l=(0,U.LO)(e);let a=`${U.v2.replace("/api","")}/${l}`;return a=a.replace("//uploads","/uploads"),a}return""},I=e=>(0,U.Qm)(e),W=e=>(0,U.Zx)(e),F=(0,k.iH)([{name:"general",icon:"store",label:"Date generale"},{name:"payments",icon:"payments",label:"Plăți"},{name:"chat",icon:"chat",label:"Chat"},{name:"files",icon:"folder_open",label:"Fișiere"},{name:"logs",icon:"history",label:"Log"}]),P=(0,k.iH)("general");(0,t.m0)((()=>{n.value=V.value.role_id===U.M6,d.value=V.value.role_id===U.i,r.value=V.value.role_id===U.Vz})),(0,t.m0)((()=>{a.value=e.getters["bids/getOpenedBidForm"],a.value&&("chat"===e.getters["bids/getLastBidTab"]?P.value="chat":P.value="general")})),(0,t.m0)((()=>{s.value=e.getters["bids/getOpenedBidData"]})),(0,t.m0)((()=>{s.value&&(i.value=s.value.id?s.value.id:0,o.value=s.value.status_id?parseInt(s.value.status_id,10):0,c.value=s.value.sum_max_permis,m.value=s.value.sum_max,p.value=s.value.sum_min,Object.keys(C.value).forEach((e=>{C.value[e]={}})),s.value.files&&Array.isArray(s.value.files)&&s.value.files.length&&s.value.files.forEach((e=>{Object.keys(C.value).indexOf(String(e.type_id))>-1&&(C.value[String(e.type_id)]=e)})))}));const B=()=>{e.commit("bids/updateOpenedBidData",{}),e.commit("bids/updateOpenedBidForm",!1)},T=l=>{i.value=l;const a={...e.getters["bids/getOpenedBidData"]};a.id=l,e.commit("bids/updateOpenedBidData",a),(0,U.QP)(),H.api.get(`/bids/get-data-by-id/${l}`).then((l=>{(0,U.Zk)(),l.data.success?(e.commit("bids/updateOpenedBidData",l.data.data),s.value=l.data.data):(0,U.NU)({message:l.data.data.message})})).catch((e=>{(0,U.Zk)(),(0,U.NU)({},e)}))},Z=a=>{if(s.value&&s.value.id){const t=()=>{(0,U.QP)(),H.api.post(`/bids/set-bid-status/${i.value}`,{status_id:a,sum_max_permis:c.value}).then((l=>{(0,U.Zk)(),l.data.success?(e.commit("bids/updateOpenedBidData",l.data.data),e.commit("users/updateRefreshGridBidsCalculator",!0)):(0,U.NU)({message:l.data.data.message})})).catch((e=>{(0,U.Zk)(),(0,U.NU)({},e)}))};if(a===U.jh||a===U.vy){let e="Sunteți sigur că doriți să aprobați cererea?";a===U.vy&&(e="Sunteți sigur că doriți să refuzați cererea?"),l.dialog({title:"Atenție",message:e,cancel:!0,persistent:!0}).onOk((()=>{t()}))}else t()}},R=()=>{C.value[String(U.sw)].name?l.dialog({title:"Atenție",message:"Sunteți sigur că doriți să închideți cererea?",cancel:!0,persistent:!0}).onOk((()=>{Z(U._f)})):l.dialog({title:"Eroare",message:"Nu ați atașat contractul semnat?",color:"negative",cancel:!1,persistent:!0})},N=()=>{let a=m.value;c.value>p.value&&(a=c.value),l.dialog({title:"Suma cererii de credit",message:`Introdu suma nouă a cererii. min: ${p.value}, max: ${a}`,prompt:{model:"",type:"number",isValid:e=>parseInt(String(e),10)<=a&&parseInt(String(e),10)>=p.value,outlined:!0},cancel:"Închide",ok:{flat:!1},persistent:!0}).onOk((l=>{i.value?((0,U.QP)(),H.api.post(`/bid-change-sum/${i.value}`,{bid_id:i.value,new_sum:l}).then((l=>{(0,U.Zk)(),l.data.success?e.commit("bids/updateOpenedBidData",l.data.data):(0,U.NU)({message:l.data.data.message})})).catch((e=>{(0,U.Zk)(),(0,U.NU)({},e)}))):(0,U.NU)({message:"eroare de id cerere"})}))},O=()=>{(0,U.WW)(i.value,"/print/contract","contract")},L=()=>{(0,U.WW)(i.value,"/print/anexa","anexa")},z=e=>{if(e.response.data.data){const l=String(e.linkFileToData.type_id);C.value[l]=e.response.data.data}};return{id:i,bidData:s,isOpenedLocal:a,onCancelClick:B,getDataById:T,statusId:o,BID_STATUS_NEW:U.VB,BID_STATUS_IN_WORK:U.j3,BID_STATUS_APPROVED:U.jh,BID_STATUS_REFUSED:U.vy,isExecutor:n,isAdmin:d,isDealer:r,setBidStatus:Z,dateToDot:U.XZ,showAllBidMonths:u,sumMaximPermis:c,disableSumMaximPermis:b,tabs:F,tab:P,openPopupForSumChange:N,getInitialsForLogo:I,getLogo:q,getColorForLogo:W,printContract:O,printAnexa:L,fileTypeSignContract:g,fileTypeAnexa:v,fileTypeUnSignContract:_,fileTypeBuletin1:f,fileTypeBuletin2:h,fileTypeOthers1:x,fileTypeOthers2:w,fileUploadedResponses:C,onFileUploaded:z,sendBidToContract:R}}};var xa=a(6778),wa=a(151),ya=a(9570),Ca=a(3747),Va=a(2025),qa=a(5869),ka=a(5589),Sa=a(5906),Ha=a(6602),Ua=a(9721),Da=a(4554),Ia=a(5096),Wa=a(4027),Fa=a(9367);const Pa=(0,yl.Z)(ha,[["render",$e]]),Ba=Pa;kl()(ha,"components",{QDialog:xa.Z,QCard:wa.Z,QToolbar:ya.Z,QToolbarTitle:Ca.Z,QSpace:Va.Z,QBtn:ga.Z,QSeparator:qa.Z,QCardSection:ka.Z,QTabPanels:Sa.Z,QTabPanel:Ha.Z,QBadge:Ua.Z,QIcon:Da.Z,QAvatar:Ia.Z,QImg:Wa.Z,QInput:Vl.Z,QCardActions:Fa.Z});const Ta=(0,t.aZ)({name:"BidsListForCalculator",components:{BidDialog:Ba},setup(){const e=(0,S.oR)(),l=(0,D.Z)(),a=(0,k.iH)([]),i=(0,k.iH)([]),o=(0,k.iH)(!1),s=(0,k.iH)(U._f),n=(0,k.iH)(null),d=(0,k.iH)(""),r=(0,k.iH)(!1),u=(0,k.iH)(!1),c=(0,k.iH)(!1),m=(0,t.Fl)((()=>e.getters["auth/getUser"])),p={sortBy:"id",descending:!0,page:1,rowsPerPage:100},b=(0,k.iH)(p),g=e=>{if(e){const l=(0,U.LO)(e);let a=`${U.v2.replace("/api","")}/${l}`;return a=a.replace("//uploads","/uploads"),a}return""},v=e=>(0,U.Qm)(e),_=e=>(0,U.Zx)(e),f=e=>(0,U.BC)(e),h=e=>e.status_id===U.VB?"bg-white":e.status_id===U.jh?"bg-green-2":e.status_id===U.vy?"bg-red-2":e.status_id===U.j3?"bg-yellow-2":"bg-white",x=e=>e===U.VB?"white":e===U.jh?"positive":e===U.vy?"negative":e===U.j3?"yellow":"white",w=e=>e===U.VB?"black":e===U.jh||e===U.vy?"white":(U.j3,"black"),y=l=>{e.commit("users/updateRefreshGridBidsCalculator",!1),o.value||(o.value=!0,H.api.post("/bids/get-list",{...l,activeModule:e.getters["auth/getActiveModule"],pagination:b.value}).then((e=>{o.value=!1,e.data.success&&(a.value=[...e.data.data.data],b.value.page=e.data.data.current_page,b.value.rowsPerPage=e.data.data.per_page,b.value.rowsNumber=e.data.data.total)})).catch((e=>{o.value=!1,(0,U.NU)({},e)})))},C=(l,a=!1)=>{e.commit("bids/updateOpenedBidData",{id:l}),e.commit("bids/updateOpenedBidForm",!0),e.commit("bids/updateLastBidTab",a?"chat":"general"),l>0&&n.value&&n.value.getDataById(l)},V=e=>{l.dialog({title:"Atenție",message:"Sunteți sigur că doriți să ștergeți?",cancel:!0,persistent:!0}).onOk((()=>{H.api["delete"](`/bids/${e.row.id}`).then((()=>{y()}))}))};(0,t.m0)((()=>{r.value=m.value.role_id===U.M6,u.value=m.value.role_id===U.i,c.value=m.value.role_id===U.Vz})),(0,t.m0)((()=>{!0===e.getters["users/getRefreshGridBidsCalculator"]&&(e.commit("users/updateRefreshGridBidsCalculator",!1),o.value||setTimeout((()=>{y()}),10))})),(0,t.m0)((()=>{const l=e.getters["auth/getCheckNewMessages"];if(e.commit("auth/updateCountNewMessages",l&&l.unreadMessages?l.unreadMessages.length:0),l&&l.unreadMessages){const t=[];if(l.unreadMessages.forEach((e=>{e.bid_id&&(void 0===t[e.bid_id]&&(t[e.bid_id]=0),t[e.bid_id]+=1)})),i.value=t,l.bids&&"Bids"===e.getters["auth/getActiveModule"]){l.bids.forEach((l=>{let t=!1;a.value.forEach(((e,i)=>{e.id===l.id&&(t=!0,e.status_id===l.status_id&&e.imprumut===l.imprumut||(a.value[i]=l))})),t||(a.value=[l,...a.value],e.commit("users/updateRefreshGridBidsCalculator",!0))}));const t=[...a.value];a.value=[],t.forEach((e=>{let t=!1;l.bids.forEach((l=>{l.id===e.id&&(t=!0)})),t&&a.value.push(e)}))}}})),(0,t.bv)((()=>{y()})),(0,t.wF)((()=>{a.value=[]}));const q=[{name:"id",label:"ID",field:"id",sortable:!0,style:"width: 20px",align:"center",classes:e=>h(e)},{name:"dealer_name",label:"Dealer",field:"dealer_name",sortable:!0,align:"left",classes:e=>h(e)},{name:"phone1",label:"Client",field:"phone1",sortable:!0,align:"left",classes:e=>h(e)}];return{loading:o,pagination:b,columns:q,rows:a,onRequest:y,filter:d,getLogo:g,getInitialsForLogo:v,getColorForLogo:_,editRow:C,deleteRow:V,getBidStatus:f,getRowClasses:h,getStatusBadgeColor:x,getStatusBadgeTextColor:w,BidDialogRef:n,unreadChats:i,isExecutor:r,isDealer:c,isAdmin:u,bidStatusSignedContract:s}}});var Za=a(8107),Ra=a(8870),Na=a(3884);const Oa=(0,yl.Z)(Ta,[["render",q]]),La=Oa;kl()(Ta,"components",{QTable:Za.Z,QInput:Vl.Z,QIcon:Da.Z,QBtn:ga.Z,QTooltip:Ra.Z,QTd:Na.Z,QBadge:Ua.Z,QAvatar:Ia.Z,QImg:Wa.Z})},3051:(e,l,a)=>{a.d(l,{Z:()=>U});var t=a(3673),i=a(2323);const o={class:"col-12 row flex column relative-position",style:{"min-height":"calc(100vh - 200px)","max-height":"calc(100vh - 200px)"}},s={key:0,class:"q-pa-md column col-12 text-center justify-center"},n=["src"],d={class:"full-width flex no-wrap items-end"},r=(0,t.Uk)("Adaugă fișier"),u=(0,t.Uk)("Trimite"),c=["id","name"];function m(e,l,a,m,p,b){const g=(0,t.up)("q-circular-progress"),v=(0,t.up)("q-chat-message"),_=(0,t.up)("q-scroll-area"),f=(0,t.up)("q-tooltip"),h=(0,t.up)("q-btn"),x=(0,t.up)("q-input"),w=(0,t.up)("q-toolbar");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(_,{visible:"",ref:"scrollAreaRef",onScroll:m.scrollHandlerArea,style:{"min-height":"calc(100vh - 250px)","max-height":"calc(100vh - 250px)",height:"calc(100vh - 250px)"}},{default:(0,t.w5)((()=>[m.chatMessagesLoad?((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(g,{indeterminate:"",size:"50px",color:"primary",class:"q-mx-auto q-my-auto"})])):(0,t.kq)("",!0),(0,t._)("div",{class:(0,i.C_)(["q-pa-md column col justify-end",{invisible:!1}]),id:"chatArea",style:{}},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(m.messages,((e,l)=>((0,t.wg)(),(0,t.j4)(v,{key:l,text:[e.message],sent:e.from_user_id===m.currentUser.id,name:m.getChatMessageUser(e),"name-html":"","text-html":!!e.file_id,stamp:e.created_at2,"bg-color":e.from_user_id===m.currentUser.id?"green-2":""+(e.read?"indigo-2":"indigo-3")},{avatar:(0,t.w5)((()=>[m.getAvatar(e.from_user_avatar)?((0,t.wg)(),(0,t.iD)("img",{key:0,src:m.getAvatar(e.from_user_avatar),class:(0,i.C_)("q-message-avatar\n               q-message-avatar--"+(e.from_user_id===m.currentUser.id?"sent":"received")),alt:""},null,10,n)):((0,t.wg)(),(0,t.iD)("div",{key:1,class:(0,i.C_)("q-message-avatar\n               q-message-avatar--"+(e.from_user_id===m.currentUser.id?"sent":"received")),style:(0,i.j5)(`color: ${m.getColorForLogo(e.from_user_name)}`)},(0,i.zw)(m.getInitialsForLogo(e.from_user_name)),7))])),_:2},1032,["text","sent","name","text-html","stamp","bg-color"])))),128))])])),_:1},8,["onScroll"]),(0,t.Wm)(w,{class:"",style:{position:"absolute",bottom:"0"}},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(x,{ref:"newMessageRef","bg-color":"green-2",rounded:"",modelValue:m.newMessage,"onUpdate:modelValue":l[1]||(l[1]=e=>m.newMessage=e),placeholder:"Message",class:"full-width",dense:"",outlined:"",type:"textarea",autogrow:""},{before:(0,t.w5)((()=>[(0,t.Wm)(h,{flat:"",round:"",color:"primary",class:"q-mt-sm",onClick:l[0]||(l[0]=e=>m.launchFilePicker()),icon:"attach_file"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[r])),_:1})])),_:1})])),after:(0,t.w5)((()=>[(0,t.Wm)(h,{round:"",dense:"",color:"primary",flat:"",onClick:m.sendMessage,icon:"send"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[u])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])])),_:1}),(0,t._)("input",{type:"file",ref:"file",multiple:"",id:m.uploadFieldId,name:m.uploadFieldName,onChange:l[2]||(l[2]=e=>m.onFileChange(e.target.name,e.target.files)),style:{display:"none"}},null,40,c)])}a(5363),a(7070);var p=a(1959),b=a(3617),g=a(5474),v=a(3413);const _={name:"Chat",props:{bid_id:{type:Number,default:null},user_id:{type:Number,default:null}},setup(e){const l=(0,b.oR)(),a=(0,p.iH)([]),i=(0,p.iH)({}),o=(0,p.iH)({}),s=(0,p.iH)(0),n=(0,p.iH)(null),d=(0,p.iH)(!1),r=(0,p.iH)(null),u=(0,p.iH)("fileForUpload"),c=(0,p.iH)(40480),m=(0,p.iH)(""),_=(0,t.Fl)((()=>l.getters["auth/getUser"])),f=()=>{n.value.setScrollPosition("vertical",999999999,1e3)},h=e=>{if(e){const l=(0,v.LO)(e);let a=`${v.v2.replace("/api","")}/${l}`;return a=a.replace("//uploads","/uploads"),a}return""},x=e=>(0,v.Qm)(e),w=e=>(0,v.Zx)(e),y=e=>{let l=`${v.v2.replace("/api","")}/${e.file_web_path}`;l=l.replace("//uploads","/uploads");let a=`<a href="${l}" target="_blank"><img src="`,t=(0,v.LO)(e.file_web_path);if(e.file_extension){const l=e.file_extension;t="jpg"===l.toLowerCase()||"jpeg"===l.toLowerCase()||"gif"===l.toLowerCase()||"png"===l.toLowerCase()||"bmp"===l.toLowerCase()?(0,v.LO)(e.file_web_path):"pdf"===l.toLowerCase()?"img/file-pdf.jpg":"doc"===l.toLowerCase()||"docx"===l.toLowerCase()?"img/file-doc.jpg":"xls"===l.toLowerCase()||"xlsx"===l.toLowerCase()||"csv"===l.toLowerCase()?"img/file-xls.jpg":"txt"===l.toLowerCase()?"img/file-txt.jpg":"rar"===l.toLowerCase()?"img/file-rar.jpg":"zip"===l.toLowerCase()?"img/file-zip.jpg":"img/file-other.jpg"}t=t.replace("//img/","/img/");let i=`${v.v2.replace("/api","")}/${t}`;return i=i.replace("//uploads/","/uploads/"),i=i.replace("//img/","/img/"),a+=i,a+='"/></a><br>',a+=e.file_name,a},C=(l,t=1,i)=>{i&&(d.value=!0),g.api.post("/get-chat-messages",{bid_id:e.bid_id,user_id:e.user_id,rowsPerPage:300,page:t}).then((e=>{i&&(d.value=!1),a.value=e.data.data.data.reverse();let t=!1;a.value&&a.value.length&&a.value.forEach(((e,l)=>{e.file_id&&e.file_web_path&&(a.value[l].message=y(e)),e.read||(t=!0)})),(l||s.value>=.5&&t)&&f()})).catch((e=>{i&&(d.value=!1,(0,v.NU)({},e))}))},V=()=>{a.value.push({message:m.value,from_user_id:_.value.id,from_user_avatar:_.value.avatar,from_user_name:_.value.name}),f(),g.api.post("/send-chat-message",{bid_id:e.bid_id,user_id:e.user_id,message:m.value}).then((e=>{e.data.success?(C(!1,1,!1),m.value=""):(0,v.NU)({message:"eroare de server"})})).catch((e=>{(0,v.NU)({},e)}))};let q=null;(0,t.bv)((()=>{r.value=`id${Math.floor(1e5*Math.random())}`,C(!0,1,!0),q=setInterval((()=>{C(!1,1,!1)}),14e3)})),(0,t.Ah)((()=>{clearInterval(q)}));const k=e=>{s.value=e.verticalPercentage},S=e=>{let l=e.read?"text-blue-grey-3":"text-subtitle2";return e.from_user_id===_.value.id&&(l="text-blue-grey-3"),`<span class='${l}'>${e.from_user_name}</span>`},H=()=>{document.getElementById(r.value).click()},U=(l,a)=>{for(let t=0;t<a.length;t+=1){const i=a[t];if(a.length>0){const a=i.size/c.value/c.value;if(i.type.match("image.*")||"application/pdf"===i.type||"application/doc"===i.type||"text/plain"===i.type||i.type.match(".*officedocument.*")||i.type.match(".*excel.*")||i.type.match(".*msword.*")||i.type.match(".*ms-doc.*")||i.type.match(".*zip-compressed.*")||i.name.match(".*rar"))if(a>1)(0,v.NU)({message:`Fișierul este prea mare! Alegeți un fișier mai mic ${c.value/1024}Мб`});else{const a={client_id:e.client_id||null,user_id:e.user_id||null,dealer_id:e.dealer_id||null,bid_id:e.bid_id||null},t=new FormData;t.append(l,i),(0,v.QP)(),g.api.post("/files/uploadFile",t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{(0,v.Zk)(),e.data.success?g.api.post("/files/linkFileTo",{...a,file_id:e.data.data.id,add_to_chat:!0}).then((()=>{C(!0,1,!1)})):(0,v.NU)({message:"Eroare de încărcare a fișierului pe server!"})})).catch((async e=>{(0,v.Zk)(),(0,v.NU)({message:"Eroare de încărcare a fișierului pe server"},e)}))}else(0,v.NU)({message:"Extensie inacceptabilă. (jpg, jpeg, png, bmp, gif, rar, zip, doc, docx, xls, xlsx, pdf, txt, csv) "})}}};return{messages:a,userDetails:i,otherUserDetails:o,newMessage:m,sendMessage:V,currentUser:_,scrollAreaRef:n,getChatMessageUser:S,getAvatar:h,getInitialsForLogo:x,getColorForLogo:w,chatMessagesLoad:d,launchFilePicker:H,uploadFieldId:r,uploadFieldName:u,onFileChange:U,scrollHandlerArea:k}}};var f=a(4260),h=a(7704),x=a(6122),w=a(629),y=a(9570),C=a(4842),V=a(2165),q=a(8870),k=a(7518),S=a.n(k);const H=(0,f.Z)(_,[["render",m]]),U=H;S()(_,"components",{QScrollArea:h.Z,QCircularProgress:x.Z,QChatMessage:w.Z,QToolbar:y.Z,QInput:C.Z,QBtn:V.Z,QTooltip:q.Z})},9517:(e,l,a)=>{a.d(l,{Z:()=>C});var t=a(3673);const i={style:{"text-align":"center"}},o=(0,t.Uk)("Schimbă imaginea"),s=(0,t.Uk)("Schimbă imaginea"),n=["src"],d={key:1,style:{color:"#4f4c4e","font-size":"23px","text-align":"center"}},r=["id","name"];function u(e,l,a,u,c,m){const p=(0,t.up)("q-tooltip"),b=(0,t.up)("q-img"),g=(0,t.up)("q-icon"),v=(0,t.up)("q-avatar"),_=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",i,[m.linkToImage&&"dealer"===a.isFor?((0,t.wg)(),(0,t.j4)(b,{key:0,src:m.linkToImage,class:"rounded-borders cursor-pointer",onClick:m.launchFilePicker,style:{"max-width":"100%","max-height":"140px",border:"1px solid rgba(79,76,78,0.35)",margin:"auto"},alt:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[o])),_:1})])),_:1},8,["src","onClick"])):((0,t.wg)(),(0,t.j4)(_,{key:1,round:"",onClick:m.launchFilePicker},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{size:"140px",class:"cursor-pointer",style:{border:"1px solid #4f4c4e",margin:"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[s])),_:1}),m.linkToImage?((0,t.wg)(),(0,t.iD)("img",{key:0,src:m.linkToImage,alt:""},null,8,n)):"dealer"===a.isFor?((0,t.wg)(),(0,t.iD)("div",d," Logo Company ")):((0,t.wg)(),(0,t.j4)(g,{key:2,color:"blue-grey-5",style:{margin:"auto"},name:"person_outline"}))])),_:1})])),_:1},8,["onClick"])),(0,t._)("input",{type:"file",ref:"file",id:m.uploadFieldId,name:c.uploadFieldName,onChange:l[0]||(l[0]=e=>m.onFileChange(e.target.name,e.target.files)),style:{display:"none"}},null,40,r)])}a(5363);var c=a(5474),m=a(3413);const p={name:"AvatarUploadField",props:{id:{type:Number,default:0},linkToCurrentImage:{type:String,default:""},isFor:{type:String,default:"user"}},data(){return{maxSize:80480,errorText:"",uploadFieldName:"fileForUpload",linkToImageUpdatedNow:""}},computed:{uploadFieldId(){return`id${Math.floor(1e5*Math.random())}`},linkToImage(){let e="";if(this.linkToImageUpdatedNow?e=this.linkToImageUpdatedNow:this.linkToCurrentImage&&(e=this.linkToCurrentImage),""!==e){e=(0,m.LO)(e);const l=String(c.api.defaults.baseURL);return`${l.replace("/api","")}/${e}`}return""}},methods:{launchFilePicker(){this.id?document.getElementById(this.uploadFieldId).click():(0,m.NU)({message:"Pentru a adăuga imaginea, mai întâi trebuie să salvați",color:"info"})},onFileChange(e,l){if(this.id){const{maxSize:a}=this;for(let t=0;t<l.length;t+=1){const i=l[t];if(l.length>0){const l=i.size/a/a;if(i.type.match("image.*"))if(l>1)(0,m.NU)({message:`Fișierul este prea mare! Alegeți un fișier mai mic ${this.maxSize/1024}Мб`});else{const l=new FormData;l.append(e,i),(0,m.QP)(),c.api.post("/files/uploadFile",l,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{if((0,m.Zk)(),e.data.success){this.file_id=e.data.data.id,this.file_web_path=e.data.data.web_path,this.linkToImageUpdatedNow=e.data.data.web_path;const l={file_id:e.data.data.id,makeAvatar:1};"dealer"===this.isFor?l.dealer_id=this.id:l.user_id=this.id,c.api.post("/files/linkFileTo",l)}else(0,m.NU)({message:"Eroare de încărcare a fișierului pe server"})})).catch((()=>{(0,m.Zk)(),(0,m.NU)({message:"Eroare de încărcare a fișierului pe server"})}))}else(0,m.NU)({message:"Extensie inacceptabilă. (jpg, jpeg, png, bmp, gif) "})}}}else(0,m.NU)({message:"Pentru a adăuga imaginea, mai întâi trebuie să salvați",color:"info"})}}};var b=a(4260),g=a(4027),v=a(8870),_=a(2165),f=a(5096),h=a(4554),x=a(7518),w=a.n(x);const y=(0,b.Z)(p,[["render",u]]),C=y;w()(p,"components",{QImg:g.Z,QTooltip:v.Z,QBtn:_.Z,QAvatar:f.Z,QIcon:h.Z})},8886:(e,l,a)=>{a.d(l,{Z:()=>w});var t=a(3673);const i=["id","name"],o=["id","name"],s=(0,t._)("div",{class:"files-card__overlay"},null,-1),n=(0,t._)("div",{class:"text-subtitle1"},"Adaugă fișier nou",-1);function d(e,l,a,d,r,u){const c=(0,t.up)("q-icon"),m=(0,t.up)("q-card-section"),p=(0,t.up)("q-btn"),b=(0,t.up)("q-card-actions"),g=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[u.showJustFileInput?((0,t.wg)(),(0,t.iD)("input",{key:0,type:"file",ref:"file",multiple:"",id:u.uploadFieldId,name:r.uploadFieldName,onChange:l[0]||(l[0]=e=>u.onFileChange(e.target.name,e.target.files)),value:"Alege fișierul",style:{"font-size":"18px",padding:"25px",background:"#5ddcc6"}},null,40,i)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t._)("input",{type:"file",ref:"file",multiple:"",id:u.uploadFieldId,name:r.uploadFieldName,onChange:l[1]||(l[1]=e=>u.onFileChange(e.target.name,e.target.files)),style:{display:"none"}},null,40,o),u.hasButtonSlot?((0,t.wg)(),(0,t.iD)("div",{key:0,onClick:l[2]||(l[2]=e=>u.launchFilePicker())},[(0,t.WI)(e.$slots,"button")])):((0,t.wg)(),(0,t.j4)(g,{key:1,onClick:l[3]||(l[3]=e=>u.launchFilePicker()),class:"files-card bg-primary text-white cursor-pointer"},{default:(0,t.w5)((()=>[s,(0,t.Wm)(m,{class:"text-center",style:{height:"100px"}},{default:(0,t.w5)((()=>[n,(0,t.Wm)(c,{class:"",name:"add",size:"xl"})])),_:1}),(0,t.Wm)(b,{align:"around"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{dense:"",size:"sm",icon:"",flat:""}),(0,t.Wm)(p,{dense:"",size:"sm",icon:"",flat:""})])),_:1})])),_:1}))],64))])}var r=a(3413),u=a(5474);const c={name:"FileUpload",props:{module:{type:String,default:""},id:{type:Number,default:0},typeId:{type:String,default:null}},data(){return{errorText:"",uploadFieldName:"fileForUpload",maxSize:20480}},emits:["onUploaded"],computed:{hasButtonSlot(){return!!this.$slots.button},uploadFieldId(){return`id${Math.floor(1e5*Math.random())}`},showJustFileInput(){return this.$q.platform.is.ios}},methods:{launchFilePicker(){document.getElementById(this.uploadFieldId).click()},onFileChange(e,l){const{maxSize:a}=this;for(let t=0;t<l.length;t+=1){const i=l[t];if(l.length>0){const l=i.size/a/a;if(i.type.match("image.*")||"application/pdf"===i.type||"application/doc"===i.type||"text/plain"===i.type||i.type.match(".*officedocument.*")||i.type.match(".*excel.*")||i.type.match(".*msword.*")||i.type.match(".*ms-doc.*")||i.type.match(".*zip-compressed.*")||i.name.match(".*rar"))if(l>1)(0,r.NU)({message:`Fișierul este prea mare! Alegeți un fișier mai mic ${this.maxSize/1024}Мб`});else{const l={client_id:"client_id"===this.module?this.id:null,user_id:"user_id"===this.module?this.id:null,dealer_id:"dealer_id"===this.module?this.id:null,bid_id:"bid_id"===this.module?this.id:null},a=new FormData;a.append(e,i),(0,r.QP)(),u.api.post("/files/uploadFile",a,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{if((0,r.Zk)(),e.data.success){const a={...l,file_id:e.data.data.id,type_id:this.typeId};u.api.post("/files/linkFileTo",a).then((l=>{this.$emit("onUploaded",{response2:l,response:e,linkFileToData:a})}))}else(0,r.NU)({message:"Eroare de încărcare a fișierului pe server!"})})).catch((async e=>{(0,r.Zk)(),(0,r.NU)({message:"Eroare de încărcare a fișierului pe server"},e)}))}else(0,r.NU)({message:"Extensie inacceptabilă. (jpg, jpeg, png, bmp, gif, rar, zip, doc, docx, xls, xlsx, pdf, txt, csv) "})}}}}};var m=a(4260),p=a(151),b=a(5589),g=a(4554),v=a(9367),_=a(2165),f=a(7518),h=a.n(f);const x=(0,m.Z)(c,[["render",d]]),w=x;h()(c,"components",{QCard:p.Z,QCardSection:b.Z,QIcon:g.Z,QCardActions:v.Z,QBtn:_.Z})},9548:(e,l,a)=>{a.d(l,{Z:()=>D});var t=a(3673),i=a(2323);const o={class:"files-form"},s={key:0,class:"row"},n={class:"col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12 q-pa-sm"},d=["href"],r={class:"absolute-bottom"},u={class:""},c=(0,t.Uk)(" Deschide "),m={class:"text-blue-grey-5 text-caption"},p=(0,t.Uk)("Șterge"),b={key:1};function g(e,l,a,g,v,_){const f=(0,t.up)("file-upload"),h=(0,t.up)("q-icon"),x=(0,t.up)("q-tooltip"),w=(0,t.up)("q-img"),y=(0,t.up)("q-btn"),C=(0,t.up)("q-card-actions"),V=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",o,[_.idExist?((0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",n,[(0,t.Wm)(f,{module:_.module,id:_.id,onOnUploaded:_.load},null,8,["module","id","onOnUploaded"])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.files,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12 q-pa-sm",key:e.title},[(0,t.Wm)(V,{class:"files-card"},{default:(0,t.w5)((()=>[(0,t._)("a",{href:e.downloadLink,download:"",target:"_blank"},[(0,t.Wm)(w,{src:e.cardSrc,style:{height:"100px",cursor:"pointer"}},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",u,(0,i.zw)(e.name),1)]),e.id>0?((0,t.wg)(),(0,t.j4)(x,{key:0,"content-class":"bg-positive","content-style":"font-size: 16px",offset:[10,10],anchor:"bottom middle",self:"bottom middle"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{name:"visibility"}),c])),_:1})):(0,t.kq)("",!0)])),_:2},1032,["src"])],8,d),(0,t.Wm)(C,{align:"around"},{default:(0,t.w5)((()=>[(0,t._)("span",m,(0,i.zw)(e.created_at2),1),e.id>0&&!_.isDealer?((0,t.wg)(),(0,t.j4)(y,{key:0,dense:"",size:"sm",onClick:l=>_.deleteFile(e.id),icon:"delete",color:"blue-grey-3",round:"",flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[p])),_:1})])),_:2},1032,["onClick"])):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1024)])))),128))])):((0,t.wg)(),(0,t.iD)("div",b," Fișierele pot fi adăugate doar după ce documentul va fi salvat "))])}a(5363);var v=a(3413),_=a(5474),f=a(8886);const h={name:"FilesForm",props:{client_id:{type:Number,default:0},bid_id:{type:Number,default:0},user_id:{type:Number,default:0},dealer_id:{type:Number,default:0}},components:{FileUpload:f.Z},data:()=>({files:[]}),computed:{user(){return this.$store.getters["auth/getUser"]},idExist(){return this.bid_id||this.user_id||this.client_id||this.dealer_id},isExecutor(){return this.user.role_id===v.Vz},isAdmin(){return this.user.role_id===v.i},isDealer(){return this.user.role_id===v.Vz},module(){return this.bid_id?"bid_id":this.user_id?"user_id":this.client_id?"client_id":this.dealer_id?"dealer_id":""},id(){return this.bid_id?this.bid_id:this.user_id?this.user_id:this.client_id?this.client_id:this.dealer_id?this.dealer_id:0}},methods:{load(){this.files=[],this.idExist&&_.api.post("/files/getFiles",{client_id:this.client_id,user_id:this.user_id,dealer_id:this.dealer_id,bid_id:this.bid_id}).then((e=>{e.data.success&&(this.files=e.data.data.data,this.files.map((e=>{"jpg"===e.extension.toLowerCase()||"jpeg"===e.extension.toLowerCase()||"gif"===e.extension.toLowerCase()||"png"===e.extension.toLowerCase()||"bmp"===e.extension.toLowerCase()?e.cardSrc=(0,v.LO)(e.web_path):"pdf"===e.extension.toLowerCase()?e.cardSrc="img/file-pdf.jpg":"doc"===e.extension.toLowerCase()||"docx"===e.extension.toLowerCase()?e.cardSrc="img/file-doc.jpg":"xls"===e.extension.toLowerCase()||"xlsx"===e.extension.toLowerCase()||"csv"===e.extension.toLowerCase()?e.cardSrc="img/file-xls.jpg":"txt"===e.extension.toLowerCase()?e.cardSrc="img/file-txt.jpg":"rar"===e.extension.toLowerCase()?e.cardSrc="img/file-rar.jpg":"zip"===e.extension.toLowerCase()?e.cardSrc="img/file-zip.jpg":e.cardSrc="img/file-other.jpg";const l=String(_.api.defaults.baseURL).replace("/api","");return e.cardSrc=`${l}/${e.cardSrc}`,e.downloadLink=`${l}/${e.web_path}`,e})))}))},deleteFile(e){this.$q.dialog({title:"Atenție",message:"Sunteți sigur că doriți să ștergeți?",ok:{label:"Șterge",flat:!1,size:"lg"},cancel:{label:"Închide",flat:!0},persistent:!0}).onOk((()=>{_.api.post("/files/deleteFile",{id:e}).then((()=>{this.load()}))}))}},watch:{client_id(){this.load()},user_id(){this.load()}},mounted(){this.load()}};var x=a(4260),w=a(151),y=a(4027),C=a(8870),V=a(4554),q=a(9367),k=a(2165),S=a(7518),H=a.n(S);const U=(0,x.Z)(h,[["render",g]]),D=U;H()(h,"components",{QCard:w.Z,QImg:y.Z,QTooltip:C.Z,QIcon:V.Z,QCardActions:q.Z,QBtn:k.Z})},7755:(e,l,a)=>{a.d(l,{Z:()=>x});var t=a(3673),i=a(2323);function o(e,l,a,o,s,n){const d=(0,t.up)("q-tab"),r=(0,t.up)("q-tabs"),u=(0,t.up)("q-icon"),c=(0,t.up)("q-item-section"),m=(0,t.up)("q-item-label"),p=(0,t.up)("q-item"),b=(0,t.up)("q-list"),g=(0,t.up)("q-btn-dropdown"),v=(0,t.Q2)("close-popup");return n.isMobile?((0,t.wg)(),(0,t.j4)(g,{key:1,color:"primary",flat:"",dense:"",icon:s.activeIcon,label:s.activeLabel},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.tabs,((e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.hidden?(0,t.kq)("",!0):(0,t.wy)(((0,t.wg)(),(0,t.j4)(p,{clickable:"",onClick:l=>n.setModelObject(e.name),key:`tabIcon-${l}`},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{name:e.icon,color:"primary",flat:""},null,8,["name"])])),_:2},1024),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[v]])],64)))),256))])),_:1})])),_:1},8,["icon","label"])):((0,t.wg)(),(0,t.j4)(r,{key:0,modelValue:s.model,"onUpdate:modelValue":l[0]||(l[0]=e=>s.model=e),"narrow-indicator":"",dense:"",align:"justify",class:"text-primary"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.tabs,((e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.hidden?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(d,{key:`tab-${l}`,ripple:!1,onClick:l=>n.setModel(e.name),name:e.name,icon:e.icon,label:e.label},null,8,["onClick","name","icon","label"]))],64)))),256))])),_:1},8,["modelValue"]))}const s={name:"HeaderTabsForForms",props:{value:{type:String,default:""},tabs:{type:Array,default(){return[]}}},data(){return{model:"",activeIcon:"",activeName:"",activeLabel:""}},emits:["input"],computed:{isMobile(){return this.$q.screen.lt.md}},methods:{setModel(e){this.model=e,this.$emit("input",this.model)},setModelObject(e){this.tabs.forEach((l=>{l.name===e&&(this.setModel(e),this.activeName=e,this.activeIcon=l.icon,this.activeLabel=l.label)}))}},watch:{model(e){this.setModelObject(e)}},mounted(){this.setModelObject(this.value)}};var n=a(4260),d=a(7547),r=a(3269),u=a(2670),c=a(7011),m=a(3414),p=a(2035),b=a(4554),g=a(2350),v=a(677),_=a(7518),f=a.n(_);const h=(0,n.Z)(s,[["render",o]]),x=h;f()(s,"components",{QTabs:d.Z,QTab:r.Z,QBtnDropdown:u.Z,QList:c.Z,QItem:m.Z,QItemSection:p.Z,QIcon:b.Z,QItemLabel:g.Z}),f()(s,"directives",{ClosePopup:v.Z})},3225:(e,l,a)=>{a.d(l,{Z:()=>b});a(246);var t=a(3673);const i=["innerHTML"];function o(e,l,a,o,s,n){const d=(0,t.up)("q-td"),r=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(r,{class:"full-width sticky-header-table",title:"",data:s.data,columns:n.columns,"row-key":"id",flat:!0,dense:!0,loading:s.loading,selection:"none",pagination:s.pagination,"onUpdate:pagination":l[0]||(l[0]=e=>s.pagination=e),"no-data-label":" ","hide-bottom":!1,"rows-per-page-label":" ","rows-per-page-options":[100,200,500,1e3,0],onRequest:n.onRequest},{"body-cell-description":(0,t.w5)((e=>[(0,t.Wm)(d,{props:e},{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:n.getDesc(e.row.description)},null,8,i)])),_:2},1032,["props"])])),_:1},8,["data","columns","loading","pagination","onRequest"])])}var s=a(3413);const n={props:{entity_id:{type:Number},entity_name:{type:String}},components:{},data(){return{dataLink:"/logs",loading:!1,selected:[],filter:"",baseURL:s.v2,pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:100,rowsNumber:0},data:[],operationItems:[{value:"e",text:"Editare"},{value:"a",text:"Adăugare"},{value:"d",text:"Ștergere"},{value:"l",text:"Login"},{value:"o",text:"Logout"}]}},computed:{columns(){return[{name:"id",label:"id",align:"center",sortable:!0,field:e=>e.id,format:e=>e,style:"width: 40px"},{name:"created_at2",label:"Data",align:"center",field:e=>e.created_at2,format:e=>`${e}`},{name:"user_name",required:!0,label:"Utilizator",align:"left",field:e=>e.user_name,format:e=>`${e}`,sortable:!0},{name:"ip",required:!0,label:"IP",align:"left",field:e=>e.ip,format:e=>`${e}`,sortable:!0},{name:"operation",required:!0,label:"Operație",align:"left",field:e=>e.operation_name,format:e=>`${e}`,sortable:!0},{label:"Modul",align:"left",name:"entity_name",field:e=>e.entity_name2,format:e=>`${e}`,sortable:!0},{label:"ID Unitate",align:"left",name:"entity_id",field:e=>e.entity_id,sortable:!0},{label:"Descriere",align:"left",name:"description",field:e=>e.description,format:e=>`${e}`,sortable:!1}]}},methods:{getOperationName(e){let l=e;return"e"===e?l="editare":"a"===e?l="adaugare":"d"===e?l="stergere":"l"===e?l="login":"o"===e&&(l="logout"),l},getEntityName(e){return(0,s.C_)(e)},getDesc(e){return e=null!==e&&e&&e.length?e.split("<< >>").join('<strong style="color:#000;">-</strong>').split("<<>>").join('<strong style="color:#000;">-</strong>').split("<<").join('<strong style="color:#000;">').split(">>").join("</strong>"):"",e?`<span style="color:#999;">${e}</span>`:""},onRequest(e={},l={}){const{filter:a}=this,{pagination:t}=this;if(e&&e.pagination){const{rowsPerPage:l,sortBy:a,descending:i}=e.pagination;t.sortBy=a,t.descending=i,e.pagination.page&&(t.page=e.pagination.page),t.rowsPerPage=l}this.loading=!0,this.$axios.post(this.dataLink,{pagination:t,filter:a,filters:{entity_id:this.entity_id,entity_name:this.entity_name},...l}).then((e=>{e.data.success&&(this.data=e.data.data.data,this.pagination.page=e.data.data.current_page,this.pagination.rowsPerPage=e.data.data.per_page,this.pagination.rowsNumber=e.data.data.total),this.loading=!1})).catch((()=>{this.loading=!1}))}},watch:{entity_id(){this.onRequest()}},mounted(){this.onRequest()}};var d=a(4260),r=a(8107),u=a(3884),c=a(7518),m=a.n(c);const p=(0,d.Z)(n,[["render",o]]),b=p;m()(n,"components",{QTable:r.Z,QTd:u.Z})},9361:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ce});var t=a(3673),i=a(8880),o=a(2323);const s=(0,t.Uk)("Caută"),n=(0,t.Uk)("Adaugă"),d=(0,t.Uk)("Redactează"),r=(0,t.Uk)("Șterge");function u(e,l,a,u,c,m){const p=(0,t.up)("q-select"),b=(0,t.up)("q-input"),g=(0,t.up)("q-icon"),v=(0,t.up)("q-tooltip"),_=(0,t.up)("q-btn"),f=(0,t.up)("q-td"),h=(0,t.up)("q-img"),x=(0,t.up)("q-avatar"),w=(0,t.up)("q-table"),y=(0,t.up)("Payment"),C=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(C,{class:"flex flex-block"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"full-width sticky-header-table",flat:!0,title:"Payments",rows:e.rows,columns:e.columns,"row-key":"id",pagination:e.pagination,"onUpdate:pagination":l[4]||(l[4]=l=>e.pagination=l),loading:e.loading,filter:e.filter,"binary-state-sort":"","no-data-label":"Nu sunt înregistrări","rows-per-page-label":"Înregistrări pe pagină","rows-per-page-options":[30,50,100,200,500,1e3,0],onRequest:e.onRequest},{"top-right":(0,t.w5)((()=>[(0,t.Wm)(p,{outlined:"","bg-color":"white",dense:"",debounce:"0",modelValue:e.paymentsInWaiting,"onUpdate:modelValue":[l[0]||(l[0]=l=>e.paymentsInWaiting=l),e.onRequest],options:[{label:"Toate",value:null},{label:"Efectuate",value:1},{label:"În așteptare",value:2}],"emit-value":"","map-options":"",style:{width:"150px"},class:"q-mr-xs",label:"Tip achitări"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(b,{outlined:"","bg-color":"white",dense:"",debounce:"300",modelValue:e.contractNumber,"onUpdate:modelValue":l[1]||(l[1]=l=>e.contractNumber=l),onKeyup:(0,i.D2)(e.onRequest,["enter"]),class:"q-mr-xs",label:"Nr contract"},null,8,["modelValue","onKeyup"]),(0,t.Wm)(b,{outlined:"","bg-color":"white",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[2]||(l[2]=l=>e.filter=l),onKeyup:(0,i.D2)(e.onRequest,["enter"]),placeholder:"Caută"},{append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"search"})])),_:1},8,["modelValue","onKeyup"]),(0,t.Wm)(_,{icon:"search",round:"",onClick:e.onRequestWithLast,class:"q-ml-lg",color:"primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[s])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(_,{icon:"add",round:"",onClick:l[3]||(l[3]=l=>e.showPaymentModalSetValue(!0)),class:"q-ml-lg",color:"positive"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[n])),_:1})])),_:1})])),"body-cell-actions":(0,t.w5)((l=>[(0,t.Wm)(f,{props:l,class:"actions-td"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{dense:"",round:"",flat:"",size:"sm",color:"positive",onClick:a=>e.editRow(l),icon:"edit"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[d])),_:1})])),_:2},1032,["onClick"]),(0,t.Wm)(_,{dense:"",round:"",flat:"",size:"sm",color:"negative",onClick:a=>e.deleteRow(l),icon:"delete"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[r])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),"body-cell-dealer_name":(0,t.w5)((l=>[(0,t.Wm)(f,{props:l,class:"props-td"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{style:{border:"1px solid #dddddd"}},{default:(0,t.w5)((()=>[e.getAvatar(l.row.logo)?((0,t.wg)(),(0,t.j4)(h,{key:0,src:e.getAvatar(l.row.logo),alt:""},null,8,["src"])):((0,t.wg)(),(0,t.iD)("div",{key:1,style:(0,o.j5)(`color: ${e.getColorForLogo(l.row.dealer_name)}`)},(0,o.zw)(e.getInitialsForLogo(l.row.dealer_name)),5))])),_:2},1024),(0,t.Uk)(" "+(0,o.zw)(l.row.dealer_name),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"]),(0,t.Wm)(y,{ref:"PaymentRef",onOnCloseDialog:l[5]||(l[5]=l=>e.showPaymentModalSetValue(!1))},null,512)])),_:1})}a(71),a(5363);var c=a(1959),m=a(3617),p=a(5474),b=a(3413);const g={class:"text-subtitle1"},v=(0,t._)("span",{class:"text-blue-grey"},"Payment",-1),_={class:(0,o.C_)("q-ml-md")};function f(e,l,a,i,s,n){const d=(0,t.up)("q-toolbar-title"),r=(0,t.up)("header-tabs-for-forms"),u=(0,t.up)("q-space"),c=(0,t.up)("q-btn"),m=(0,t.up)("q-toolbar"),p=(0,t.up)("q-separator"),b=(0,t.up)("PaymentGeneral"),f=(0,t.up)("q-tab-panel"),h=(0,t.up)("q-tab-panels"),x=(0,t.up)("q-card-section"),w=(0,t.up)("q-card-actions"),y=(0,t.up)("q-card"),C=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(C,{ref:"dialogRef",modelValue:i.isOpenedLocal,"onUpdate:modelValue":l[2]||(l[2]=e=>i.isOpenedLocal=e),onHide:i.onDialogHide,"full-height":"",persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"q-dialog-plugin",style:{width:"100%","max-width":"800px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:(0,o.C_)("q-pr-xs")},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t._)("span",g,[v,(0,t._)("strong",_,(0,o.zw)(i.id),1)])])),_:1}),(0,t.Wm)(r,{modelValue:i.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>i.tab=e),tabs:i.tabs},null,8,["modelValue","tabs"]),(0,t.Wm)(u),(0,t.Wm)(c,{icon:"close",flat:"",round:"",dense:"",onClick:i.onCancelClick},null,8,["onClick"])])),_:1}),(0,t.Wm)(p),(0,t.Wm)(x,{style:{"min-height":"calc(100vh - 165px)","max-height":"calc(100vh - 165px)"},class:"scroll"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:i.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>i.tab=e),animated:"","keep-alive":""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"general",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{ref:"PaymentGeneralRef"},null,512)])),_:1})])),_:1},8,["modelValue"])])),_:1}),"general"===i.tab?((0,t.wg)(),(0,t.j4)(p,{key:0})):(0,t.kq)("",!0),"general"===i.tab?((0,t.wg)(),(0,t.j4)(w,{key:1,align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"primary",label:"Salvează",onClick:i.onOKClick},null,8,["onClick"]),(0,t.Wm)(c,{label:"Închide",onClick:i.onCancelClick},null,8,["onClick"])])),_:1})):(0,t.kq)("",!0)])),_:1})])),_:1},8,["modelValue","onHide"])}var h=a(1701),x=a(7755);const w={class:"row"},y={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},C={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},V={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 q-pa-xs"},q={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},k={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},S=(0,t._)("span",{class:"text-primary"},"Suma facto",-1),H={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},U={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},D={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-12 q-pa-xs"},I=(0,t._)("span",{class:"text-primary"},"Transfer/Numerar",-1);function W(e,l,a,i,s,n){const d=(0,t.up)("q-input"),r=(0,t.up)("q-img"),u=(0,t.up)("q-avatar"),c=(0,t.up)("q-select");return(0,t.wg)(),(0,t.iD)("div",w,[(0,t._)("div",y,[(0,t.Wm)(d,{outlined:"",readonly:"",modelValue:e.clientName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.clientName=l),label:"Nume Prenume client"},null,8,["modelValue"])]),(0,t._)("div",C,[(0,t.Wm)(d,{outlined:"",readonly:"",modelValue:e.phone1,"onUpdate:modelValue":l[1]||(l[1]=l=>e.phone1=l),label:"Telefon 1"},null,8,["modelValue"])]),(0,t._)("div",V,[(0,t.Wm)(d,{outlined:"",readonly:"",modelValue:e.dealerName,"onUpdate:modelValue":l[2]||(l[2]=l=>e.dealerName=l),label:"Dealer"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{border:"1px solid #dddddd"}},{default:(0,t.w5)((()=>[e.getAvatar(e.logo)?((0,t.wg)(),(0,t.j4)(r,{key:0,src:e.getAvatar(e.logo),alt:""},null,8,["src"])):((0,t.wg)(),(0,t.iD)("div",{key:1,style:(0,o.j5)(`color: ${e.getColorForLogo(e.dealerName)}`)},(0,o.zw)(e.getInitialsForLogo(e.dealerName)),5))])),_:1})])),_:1},8,["modelValue"])]),(0,t._)("div",q,[(0,t.Wm)(d,{outlined:"",readonly:"",modelValue:e.paymentSum,"onUpdate:modelValue":l[3]||(l[3]=l=>e.paymentSum=l),label:"Suma rată"},null,8,["modelValue"])]),(0,t._)("div",k,[(0,t.Wm)(d,{outlined:"",type:"number",modelValue:e.paymentSumFact,"onUpdate:modelValue":l[4]||(l[4]=l=>e.paymentSumFact=l),label:"Suma facto"},{label:(0,t.w5)((()=>[S])),_:1},8,["modelValue"])]),(0,t._)("div",H,[(0,t.Wm)(d,{outlined:"",readonly:"",modelValue:e.dateTime,"onUpdate:modelValue":l[5]||(l[5]=l=>e.dateTime=l),label:"Data rată"},null,8,["modelValue"])]),(0,t._)("div",U,[(0,t.Wm)(d,{outlined:"",readonly:"",modelValue:e.dateTimeFact,"onUpdate:modelValue":l[6]||(l[6]=l=>e.dateTimeFact=l),label:"Data facto"},null,8,["modelValue"])]),(0,t._)("div",D,[(0,t.Wm)(c,{outlined:"",modelValue:e.beznal,"onUpdate:modelValue":l[7]||(l[7]=l=>e.beznal=l),options:[{label:"Numerar",value:null},{label:"Transfer",value:1}],"emit-value":"","map-options":"","option-value":"value","option-label":"label",label:"Transfer/Numerar"},{label:(0,t.w5)((()=>[I])),_:1},8,["modelValue"])])])}a(246);const F=(0,t.aZ)({name:"PaymentGeneral",components:{},setup(){const e=(0,m.oR)(),l=(0,c.iH)(""),a=(0,c.iH)(""),i=(0,c.iH)(""),o=(0,c.iH)(""),s=(0,c.iH)(0),n=(0,c.iH)({}),d=(0,c.iH)(""),r=(0,c.iH)(0),u=(0,c.iH)(null),g=(0,c.iH)(null),v=(0,c.iH)(null),_=(0,c.iH)(null),f=e=>{if(e){const l=(0,b.LO)(e),a=String(p.api.defaults.baseURL);return`${a.replace("/api","")}/${l}`}return""},h=e=>(0,b.Qm)(e),x=e=>(0,b.Zx)(e);(0,t.m0)((()=>{n.value=e.getters["payments/getOpenedPaymentData"]})),(0,t.m0)((()=>{s.value=n.value.id||0,l.value=n.value.client_last_name?`${n.value.client_last_name} ${n.value.client_first_name}`:"",d.value=n.value.logo||"",a.value=n.value.dealer_name||"",i.value=n.value.phone1||"",o.value=n.value.description||"",r.value=n.value.payment_sum||0,u.value=n.value.payment_sum_fact||null,g.value=n.value.beznal||null,v.value=n.value.date_time?(0,b.XZ)(n.value.date_time):"",_.value=n.value.date_time_fact?(0,b.$M)(n.value.date_time_fact):null}));const w=()=>{if(r.value){const l={phone1:i.value,description:o.value,paymentSumFact:u.value,beznal:g.value};(0,b.QP)();const a=parseInt(String(s.value),10);p.api.post(`/payment-add-or-edit/${a}`,l).then((l=>{(0,b.Zk)(),l.data.success?(a>0?(e.commit("payments/updateOpenedPaymentData",{}),e.commit("payments/updateOpenedPaymentForm",!1)):(e.commit("payments/updateOpenedPaymentData",l.data.data),e.commit("payments/updateOpenedPaymentForm",!0)),e.commit("payments/updateRefreshGrid",!0)):(0,b.NU)({message:"Eroare de update"})})).catch((e=>{(0,b.Zk)(),(0,b.NU)({},e)}))}};return{id:s,logo:d,clientName:l,phone1:i,save:w,paymentSumFact:u,paymentSum:r,dateTimeFact:_,dateTime:v,dealerName:a,getAvatar:f,getColorForLogo:x,getInitialsForLogo:h,beznal:g}}});var P=a(4260),B=a(4842),T=a(5096),Z=a(4027),R=a(8516),N=a(7518),O=a.n(N);const L=(0,P.Z)(F,[["render",W]]),z=L;O()(F,"components",{QInput:B.Z,QAvatar:T.Z,QImg:Z.Z,QSelect:R.Z});const M={name:"Payment",components:{PaymentGeneral:z,HeaderTabsForForms:x.Z},props:{},emits:[...h.Z.emits,"onCloseDialog"],setup(e,l){const a=(0,c.iH)(!1),i=(0,c.iH)(null),o=(0,c.iH)([{name:"general",icon:"store",label:"Date generale"},{name:"files",icon:"folder_open",label:"Fișiere"},{name:"logs",icon:"history",label:"Log"}]),s=(0,c.iH)("general"),n=(0,c.iH)(0),d=(0,m.oR)(),r=(0,c.iH)({}),{dialogRef:u,onDialogHide:g,onDialogCancel:v}=(0,h.Z)();(0,t.m0)((()=>{a.value=d.getters["payments/getOpenedPaymentForm"]})),(0,t.m0)((()=>{r.value=d.getters["payments/getOpenedPaymentData"]})),(0,t.m0)((()=>{n.value=r.value.id}));const _=(e=null)=>{const l={...d.getters["payments/getOpenedPaymentData"]};l.id=e,d.commit("payments/updateOpenedPaymentData",l),(0,b.QP)(),p.api.get(`/payments/get-data-by-id/${e}`).then((e=>{(0,b.Zk)(),e.data.success?d.commit("payments/updateOpenedPaymentData",e.data.data):(0,b.NU)({message:e.data.data.message})})).catch((e=>{(0,b.Zk)(),(0,b.NU)({},e)}))},f=()=>{l.emit("onCloseDialog",!1),g()},x=()=>{"undefined"!==typeof i.value&&"undefined"!==typeof i.value.save&&i.value.save()};return{dialogRef:u,onDialogHide:f,onOKClick:x,onCancelClick:v,isOpenedLocal:a,id:n,tab:s,tabs:o,PaymentGeneralRef:i,getDataById:_}}};var E=a(6778),A=a(151),Q=a(9570),j=a(3747),$=a(2025),Y=a(2165),G=a(5869),K=a(5589),J=a(5906),X=a(6602),ee=a(9367);const le=(0,P.Z)(M,[["render",f]]),ae=le;O()(M,"components",{QDialog:E.Z,QCard:A.Z,QToolbar:Q.Z,QToolbarTitle:j.Z,QSpace:$.Z,QBtn:Y.Z,QSeparator:G.Z,QCardSection:K.Z,QTabPanels:J.Z,QTabPanel:X.Z,QCardActions:ee.Z});var te=a(8825);const ie=(0,t.aZ)({name:"Payments",components:{Payment:ae},props:{bid_id:{type:Number,default:null}},setup(e){let l=[{name:"id",label:"ID",field:"id",sortable:!0,style:"width: 50px"}];e.bid_id||(l.push({name:"bid_id",label:"Contract",field:"bid_id",sortable:!0,align:"center",style:"width: 50px"}),l.push({name:"dealer_name",label:"Dealer",field:"dealer_name",sortable:!0,align:"center",style:"width: 50px"}));const a=[{name:"date_time",label:"Data rată",field:"date_time",sortable:!0,align:"center",style:"width: 80px",format:e=>e?(0,b.XZ)(e):""},{name:"date_time_fact",label:"Data facto",field:"date_time_fact",sortable:!0,align:"center",style:"width: 80px",format:e=>e?(0,b.$M)(e):""},{name:"beznal",label:"Transfer/Numerar",field:"beznal",sortable:!0,align:"left",format:e=>e?"Transfer":"Numerar"},{name:"payment_sum",label:"Suma rată",field:"payment_sum",sortable:!0,align:"left"},{name:"payment_sum_fact",label:"Suma facto",field:"payment_sum_fact",sortable:!0,align:"left"}];e.bid_id||(a.push({name:"client_last_name",label:"Client",field:"client_last_name",sortable:!0,align:"left",format:(e,l)=>e?`${l.client_last_name} ${l.client_first_name}`:""}),a.push({name:"created_at2",label:"Adăugat",field:"created_at2",sortable:!0}));const i=[{name:"actions",label:"",align:"center",style:"width: 60px"}];l=[...l,...a,...i];const o=(0,te.Z)(),s=(0,c.iH)([]),n=(0,c.iH)(null),d=(0,c.iH)(""),r=(0,c.iH)(null),u=(0,c.iH)(null),g=(0,c.iH)(!1),v=(0,m.oR)(),_=(0,c.iH)(null);v.commit("auth/updateActiveModule","Payments");const f=(0,c.iH)({sortBy:"id",descending:!0,page:1,rowsPerPage:30}),h=e=>{if(e){const l=(0,b.LO)(e),a=String(p.api.defaults.baseURL);return`${a.replace("/api","")}/${l}`}return""},x=e=>(0,b.Qm)(e),w=e=>(0,b.Zx)(e),y=l=>{g.value=!0,_.value=l,v.commit("payments/updateRefreshGrid",!1),p.api.post("/payments-list",{...l,contractNumber:r.value,paymentsInWaiting:u.value,bid_id:e.bid_id}).then((e=>{g.value=!1,e.data.success&&(s.value=e.data.data.data,f.value.page=e.data.data.current_page,f.value.rowsPerPage=e.data.data.per_page,f.value.rowsNumber=e.data.data.total)})).catch((e=>{g.value=!1,(0,b.NU)({},e)}))},C=(e,l=0)=>{v.commit("payments/updateOpenedPaymentForm",e),v.commit("payments/updateOpenedPaymentData",{}),e&&l>0&&n.value&&n.value.getDataById(l)},V=e=>{C(!0,e.row.id)},q=e=>{o.dialog({title:"Atenție",message:"Sunteți sigur că doriți să ștergeți?",cancel:!0,persistent:!0}).onOk((()=>{p.api["delete"](`/payments/${e.row.id}`).then((()=>{y(_.value)}))}))},k=()=>{y(_.value)};return(0,t.m0)((()=>{v.getters["payments/getRefreshGrid"]&&y(_.value)})),(0,t.bv)((()=>{y({pagination:f.value,filter:void 0})})),{filter:d,loading:g,pagination:f,columns:l,rows:s,showPaymentModalSetValue:C,editRow:V,deleteRow:q,onRequest:y,contractNumber:r,paymentsInWaiting:u,PaymentRef:n,getAvatar:h,getColorForLogo:w,getInitialsForLogo:x,onRequestWithLast:k}}});var oe=a(4379),se=a(8107),ne=a(4554),de=a(8870),re=a(3884);const ue=(0,P.Z)(ie,[["render",u]]),ce=ue;O()(ie,"components",{QPage:oe.Z,QTable:se.Z,QSelect:R.Z,QInput:B.Z,QIcon:ne.Z,QBtn:Y.Z,QTooltip:de.Z,QTd:re.Z,QAvatar:T.Z,QImg:Z.Z})}}]);