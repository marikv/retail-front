"use strict";(self["webpackChunkretail_creditbox_md"]=self["webpackChunkretail_creditbox_md"]||[]).push([[421],{6421:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var l=a(3673),n=a(2323);const i=(0,l.Uk)(" Retail CreditBox "),o=(0,l.Uk)("Ieșire"),u=(0,l.Uk)("   ");function r(e,t,a,r,s,d){const c=(0,l.up)("q-btn"),p=(0,l.up)("q-toolbar-title"),m=(0,l.up)("q-icon"),h=(0,l.up)("q-item-section"),w=(0,l.up)("q-item-label"),f=(0,l.up)("q-tooltip"),k=(0,l.up)("q-item"),g=(0,l.up)("q-toolbar"),_=(0,l.up)("q-header"),v=(0,l.up)("EssentialLink"),b=(0,l.up)("q-list"),q=(0,l.up)("q-drawer"),W=(0,l.up)("router-view"),y=(0,l.up)("q-page-container"),Z=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(Z,{view:"lHh Lpr lFf"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{elevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l._)("div",null,[(0,l.Wm)(k,{class:"text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"account_circle"})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.user.name),1)])),_:1}),(0,l.Wm)(w,{caption:"",class:"text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.getRole(e.user.role_id)),1)])),_:1})])),_:1}),(0,l.Wm)(h,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"logout",class:"cursor-pointer",color:"white",onClick:e.logout},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[o])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1})])),_:1}),e.authenticated&&e.hasPermisionToLeftMenu?((0,l.wg)(),(0,l.j4)(q,{key:0,modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[0]||(t[0]=t=>e.leftDrawerOpen=t),"show-if-above":"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"bg-indigo-1",style:{"border-bottom":"1px solid #dddddd",height:"51px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.linksList,(e=>((0,l.wg)(),(0,l.j4)(v,(0,l.dG)({key:e.title},e),null,16)))),128))])),_:1})])),_:1},8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W)])),_:1})])),_:1})}function s(e,t,a,i,o,u){const r=(0,l.up)("q-icon"),s=(0,l.up)("q-item-section"),d=(0,l.up)("q-item-label"),c=(0,l.up)("q-item"),p=(0,l.Q2)("ripple");return 0!==e.children.length||e.hidden?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{key:0,dense:e.dense,clickable:!1,tag:"a",to:e.name?{name:e.name,exact:!0,params:e.params}:{path:e.link,exact:!0,params:e.params}},{default:(0,l.w5)((()=>[e.icon?((0,l.wg)(),(0,l.j4)(s,{key:0,avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{name:e.icon},null,8,["name"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.title),1)])),_:1}),e.caption?((0,l.wg)(),(0,l.j4)(d,{key:0,caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.caption),1)])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1},8,["dense","to"])),[[p]])}const d=(0,l.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},dense:{type:Boolean,required:!1},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""},name:{type:String,default:""},params:{type:Object,default(){return{}}},hidden:{type:Boolean,default:!1},children:{type:Array,default(){return[]}}}});var c=a(4260),p=a(3414),m=a(2035),h=a(4554),w=a(2350),f=a(6489),k=a(7518),g=a.n(k);const _=(0,c.Z)(d,[["render",s]]),v=_;g()(d,"components",{QItem:p.Z,QItemSection:m.Z,QIcon:h.Z,QItemLabel:w.Z}),g()(d,"directives",{Ripple:f.Z});var b=a(1959),q=a(3617),W=a(9582),y=a(5474),Z=a(3413);const Q=[{title:"Dealers",icon:"store",link:"dealers"},{title:"Calculator",icon:"functions",link:"calculator"},{title:"Cereri",icon:"warning_amber",link:"bids"},{title:"Contracte",icon:"gavel",link:"contracts"},{title:"Utilizatori",icon:"people_alt",link:"users"},{title:"Plăți",icon:"payments",link:"payments"},{title:"Rapoarte",icon:"bar_chart",link:"reports"},{title:"Settings",icon:"settings",link:"settings"}],L=(0,l.aZ)({name:"MainLayout",components:{EssentialLink:v},setup(){const e=(0,W.tv)(),t=(0,b.iH)(!1),a=(0,b.iH)(!1),n=(0,q.oR)(),i=(0,l.Fl)((()=>!!n.getters["auth/getToken"])),o=(0,l.Fl)((()=>n.getters["auth/getUser"])),u=e=>(0,Z.O2)(e);(0,l.m0)((()=>{if(i.value)y.api.defaults.headers.common.Authorization=`Bearer ${n.getters["auth/getToken"]}`;else{const t=Z.mb.get("token");t?(y.api.defaults.headers.common.Authorization=`Bearer ${t}`,y.api.post("/checkToken").then((a=>{a.data.success&&a.data.data&&a.data.data.user?(n.commit("auth/updateToken",t),n.commit("auth/updateUser",a.data.data.user)):(y.api.defaults.headers.common.Authorization="",e.push({path:"/auth"}))})).catch((()=>{y.api.defaults.headers.common.Authorization="",e.push({path:"/auth"})}))):(y.api.defaults.headers.common.Authorization="",e.push({path:"/auth"}))}})),(0,l.m0)((()=>{a.value=!(!o.value||o.value.role_id===Z.Vz),o.value&&o.value.role_id===Z.Vz&&e.push({path:"/calculator"})}));const r=()=>{n.commit("auth/updateToken",""),n.commit("auth/updateUser",{}),Z.mb.set("token",""),y.api.post("/logout")},s=()=>{o.value&&o.value.id&&y.api.post("/checkNewMessages",{activeModule:n.getters["auth/getActiveModule"]}).then((e=>{e.data.success&&n.commit("auth/updateCheckNewMessages",e.data.data)}))};return s(),setInterval((()=>{s()}),1e4),{authenticated:i,linksList:Q,leftDrawerOpen:t,logout:r,hasPermisionToLeftMenu:a,toggleLeftDrawer(){t.value=!t.value},user:o,getRole:u}}});var z=a(9214),C=a(3812),U=a(9570),T=a(2165),I=a(3747),x=a(8870),D=a(2901),M=a(7011),S=a(2652);const j=(0,c.Z)(L,[["render",r]]),A=j;g()(L,"components",{QLayout:z.Z,QHeader:C.Z,QToolbar:U.Z,QBtn:T.Z,QToolbarTitle:I.Z,QItem:p.Z,QItemSection:m.Z,QIcon:h.Z,QItemLabel:w.Z,QTooltip:x.Z,QDrawer:D.Z,QList:M.Z,QPageContainer:S.Z})}}]);