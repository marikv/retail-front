"use strict";(self["webpackChunkretail_creditbox_md"]=self["webpackChunkretail_creditbox_md"]||[]).push([[396],{6396:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var l=t(3673),o=t(8880),n=t(2323);const r=(0,l.Uk)("Caută"),i=(0,l.Uk)("Adaugă"),s=(0,l.Uk)("Redactează"),d=(0,l.Uk)("Șterge"),u=(0,l.Uk)("Deschide");function p(e,a,t,p,c,g){const m=(0,l.up)("q-icon"),w=(0,l.up)("q-input"),f=(0,l.up)("q-tooltip"),b=(0,l.up)("q-btn"),v=(0,l.up)("q-td"),_=(0,l.up)("q-img"),h=(0,l.up)("q-avatar"),R=(0,l.up)("q-table"),k=(0,l.up)("User"),U=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(U,{class:"flex flex-block"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"full-width sticky-header-table",flat:!0,title:"Useri",rows:e.rows,columns:e.columns,"row-key":"id",pagination:e.pagination,"onUpdate:pagination":a[2]||(a[2]=a=>e.pagination=a),loading:e.loading,filter:e.filter,"binary-state-sort":"","no-data-label":"Nu sunt înregistrări","rows-per-page-label":"Înregistrări pe pagină","rows-per-page-options":[30,50,100,200,500,1e3,0],onRequest:e.onRequest},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(w,{outlined:"","bg-color":"white",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filter=a),onKeyup:(0,o.D2)(e.onRequest,["enter"]),placeholder:"Caută"},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"search"})])),_:1},8,["modelValue","onKeyup"]),(0,l.Wm)(b,{icon:"search",round:"",onClick:e.onRequestWithLast,class:"q-ml-lg",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[r])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(b,{icon:"add",round:"",onClick:a[1]||(a[1]=a=>e.showUserModalSetValue(!0)),class:"q-ml-lg",color:"positive"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[i])),_:1})])),_:1})])),"body-cell-actions":(0,l.w5)((a=>[(0,l.Wm)(v,{props:a,class:"actions-td"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{dense:"",round:"",flat:"",size:"sm",color:"positive",onClick:t=>e.editRow(a),icon:"edit"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(b,{dense:"",round:"",flat:"",size:"sm",color:"negative",onClick:t=>e.deleteRow(a),icon:"delete"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[d])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),"body-cell-logo":(0,l.w5)((a=>[(0,l.Wm)(v,{props:a,class:"props-td"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{onClick:t=>e.editRow(a),class:"cursor-pointer",style:{border:"1px solid #dddddd"}},{default:(0,l.w5)((()=>[e.getAvatar(a.row.avatar)?((0,l.wg)(),(0,l.j4)(_,{key:0,src:e.getAvatar(a.row.avatar),alt:""},null,8,["src"])):((0,l.wg)(),(0,l.iD)("div",{key:1,style:(0,n.j5)(`color: ${e.getColorForLogo(a.row.name)}`)},(0,n.zw)(e.getInitialsForLogo(a.row.name)),5)),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"]),(0,l.Wm)(k,{ref:"UserRef",onOnCloseDialog:a[3]||(a[3]=a=>e.showUserModalSetValue(!1))},null,512)])),_:1})}t(5363);var c=t(1959),g=t(3617),m=t(5474),w=t(3413),f=t(7729),b=t(8825),v=t(27);const _=[{name:"id",label:"ID",field:"id",sortable:!0,style:"width: 50px"},{name:"logo",label:"",align:"center",style:"width: 80px"},{name:"name",label:"Nume",field:"name",sortable:!0,align:"left"},{name:"role_id",label:"Rol",field:"role_id",sortable:!0,align:"left",format:e=>e&&v.Z.USER_ROLES[parseInt(e,10)]?v.Z.USER_ROLES[parseInt(e,10)]:v.Z.USER_ROLES[1]},{name:"phone1",label:"Telefon",field:"phone1",sortable:!0,align:"left"},{name:"email",label:"Email",field:"email",sortable:!0,align:"left"},{name:"created_at2",label:"Adăugat",field:"created_at2",sortable:!0},{name:"actions",label:"",align:"center",style:"width: 60px"}],h=(0,l.aZ)({name:"users",components:{User:f.Z},setup(){const e=(0,b.Z)(),a=(0,c.iH)([]),t=(0,c.iH)(null),o=(0,c.iH)(""),n=(0,c.iH)(!1),r=(0,g.oR)(),i=(0,c.iH)(null);r.commit("auth/updateActiveModule","Users");const s=(0,c.iH)({sortBy:"id",descending:!0,page:1,rowsPerPage:30}),d=e=>{if(e){const a=(0,w.LO)(e),t=String(m.api.defaults.baseURL);return`${t.replace("/api","")}/${a}`}return""},u=e=>(0,w.Qm)(e),p=e=>(0,w.Zx)(e),f=e=>{n.value=!0,i.value=e,r.commit("users/updateRefreshGrid",!1),m.api.post("/users-list",{...e}).then((e=>{n.value=!1,e.data.success&&(a.value=e.data.data.data,s.value.page=e.data.data.current_page,s.value.rowsPerPage=e.data.data.per_page,s.value.rowsNumber=e.data.data.total)})).catch((e=>{n.value=!1,(0,w.NU)({},e)}))},v=(e,a=0)=>{r.commit("users/updateOpenedUserForm",e),r.commit("users/updateOpenedUserData",{}),e&&a>0&&t.value&&t.value.getDataById(a)},h=e=>{v(!0,e.row.id)},R=a=>{e.dialog({title:"Atenție",message:"Sunteți sigur că doriți să ștergeți?",cancel:!0,persistent:!0}).onOk((()=>{m.api["delete"](`/users/${a.row.id}`).then((()=>{f(i.value)}))}))},k=()=>{f(i.value)};return(0,l.m0)((()=>{r.getters["users/getRefreshGrid"]&&f(i.value)})),(0,l.bv)((()=>{f({pagination:s.value,filter:void 0})})),{filter:o,loading:n,pagination:s,columns:_,rows:a,showUserModalSetValue:v,editRow:h,deleteRow:R,onRequest:f,UserRef:t,getAvatar:d,getColorForLogo:p,getInitialsForLogo:u,onRequestWithLast:k}}});var R=t(4260),k=t(4379),U=t(8107),q=t(4842),W=t(4554),y=t(2165),Z=t(8870),C=t(3884),L=t(5096),S=t(4027),Q=t(7518),x=t.n(Q);const I=(0,R.Z)(h,[["render",p]]),A=I;x()(h,"components",{QPage:k.Z,QTable:U.Z,QInput:q.Z,QIcon:W.Z,QBtn:y.Z,QTooltip:Z.Z,QTd:C.Z,QAvatar:L.Z,QImg:S.Z})}}]);